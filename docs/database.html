<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>couchdb3.database API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>couchdb3.database</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python3
# -*- coding: utf-8 -*-

from typing import Any, Dict, Iterable, List, Tuple, Union

import requests

from .base import Base
from .document import Document, AttachmentDocument, extract_document_id_and_rev, SecurityDocument, \
    SecurityDocumentElement
from .exceptions import CouchDBError, NameComplianceError
from .utils import validate_db_name, content_type_getter, DEFAULT_TIMEOUT
from .view import ViewResult


__all__ = [
    &#34;Database&#34;
]


class Database(Base):
    &#34;&#34;&#34;
    Abstract Couchdb database
    &#34;&#34;&#34;
    def __init__(
            self,
            name: str,
            *,
            url: str = None,
            port: int = None,
            user: str = None,
            password: str = None,
            disable_ssl_verification: bool = False,
            auth_method: str = None,
            timeout: int = DEFAULT_TIMEOUT,
            session: requests.Session = None,
    ) -&gt; None:
        &#34;&#34;&#34;

        Parameters
        ----------
        name : str
            The name of the database.
        url : str
            The url of the CouchDB server formatted as `scheme://user:password@host:port`. For example:

                &#34;http://user:password@127.0.0.1:5984&#34;
                &#34;https://couchdb.example.com&#34;
        port : int
            The port of the CouchDB server. Can also be supplied via the url.
        user : str
            The CouchDB admin username. Can also be supplied via the url.
        password : str
            The CouchDB admin password. Can also be supplied via the url.
        disable_ssl_verification : bool
            Controls whether to verify the server’s TLS certificate. Set to `True` when connecting to a server with
            self-signed TLS certificates. Default `False`.
        auth_method : str
            Authentication method. Choices are `cookie` or `basic`. Default is `couchdb3.utils.DEFAULT_AUTH_METHOD`.
        timeout : int
            The default timeout for requests. Default c.f. `couchdb3.utils.DEFAULT_TIMEOUT`.
        session: requests.Session
            A specific session to use. Optional - if not provided, a new session will be initialized.
        &#34;&#34;&#34;
        super(Database, self).__init__(
            url=url,
            session=session,
            port=port,
            user=user,
            password=password,
            disable_ssl_verification=disable_ssl_verification,
            auth_method=auth_method,
            timeout=timeout
        )
        if validate_db_name(name=name) is False:
            raise NameComplianceError(
                &#34;Database name does not comply with the CouchDB requirements. &#34;
                &#34;See https://docs.couchdb.org/en/latest/api/database/common.html#put--db.&#34;
            )
        self.name = name
        self.root = name

    def __getitem__(self, item) -&gt; Document:
        return self.get(docid=item, check=True)

    def __repr__(self) -&gt; str:
        &#34;&#34;&#34;
        Basic repr.

        Returns
        -------
        str : The instance&#39;s representation.
        &#34;&#34;&#34;
        return f&#34;{super(Database, self).__repr__()}: {self.name}&#34;

    def all_docs(
            self,
            partition: str = None,
            keys: Iterable[str] = None,
            **kwargs
    ) -&gt; ViewResult:
        &#34;&#34;&#34;
        Executes the built-in _all_docs view, returning all of the documents in the database.

        Parameters
        ----------
        partition : str
            Filter using the partition&#39;s name (only valid for partitioned databases). Default is `None`.
        keys : Iterable[str]
            Return only documents where the key matches one of the keys specified in the argument. Default is `None`.
        kwargs
            Further `couchdb3.database.Database.view` parameters.

        Returns
        -------
        ViewResult
        &#34;&#34;&#34;
        return self.view(
            f&#34;_partition/{partition}/_all_docs&#34; if partition else &#34;_all_docs&#34;,
            keys=keys,
            **kwargs
        )

    def bulk_docs(
            self,
            docs: List[Union[Dict, Document]],
            new_edits: bool = True
    ) -&gt; List[Dict]:
        &#34;&#34;&#34;
        The bulk document API allows you to create and update multiple documents at the same time within a single
        request. The basic operation is similar to creating or updating a single document, except that you batch the
        document structure and information.

        When creating new documents the document ID (`_id`) is optional.

        For updating existing documents, you must provide the document ID, revision information (`_rev`), and new
        document values.

        In case of batch deleting documents all fields as document ID, revision information and deletion status
        (`_deleted`) are required.

        Parameters
        ----------
        docs : List[Union[Dict, Document]]
             List of documents objects
        new_edits : bool
            If `False`, prevents the database from assigning them new revision IDs. Default `True`.

        Returns
        -------
        List[Dict] : A list of dictionaries containing the following keys.

          - `id` the document&#39;s id
          - `ok` operation status
          - `rev` the document&#39;s revision
        &#34;&#34;&#34;
        return self._post(
            resource=&#34;_bulk_docs&#34;,
            body={
                &#34;docs&#34;: docs,
                &#34;new_edits&#34;: new_edits
            }
        ).json()

    def bulk_get(
            self,
            docs: List[Union[Dict, Document]],
            revs: bool = False
    ) -&gt; List[Dict]:
        &#34;&#34;&#34;
        This method can be called to query several documents in bulk. It is well suited for fetching a specific
        revision of documents, as replicators do for example, or for getting revision history.

        Parameters
        ----------
        docs : List[Union[Dict, Document]]
            List of document objects, with `id`, and optionally `rev` and `atts_since`.
        revs : bool
             Give the revisions history.

        Returns
        -------
        List[Dict] : An array of results for each requested document/rev pair.

          - `id` key lists the requested
          document ID,
          - `docs` contains a single-item array of objects, each of which has either an `error` key and value describing
          the error, or `ok` key and associated value of the requested document, with the additional _revisions property
          that lists the parent revisions if `revs=true`.
        &#34;&#34;&#34;
        return self._post(
            resource=&#34;_bulk_get&#34;,
            body={
                &#34;docs&#34;: [extract_document_id_and_rev(_) for _ in docs]
            },
            query_kwargs={
                &#34;revs&#34;: revs
            }
        ).json().get(&#34;results&#34;, [])

    def compact(
            self,
            ddoc: str = None
    ) -&gt; bool:
        &#34;&#34;&#34;
        Request compaction of the database. For more info, please refer to
        [the official documentation](https://docs.couchdb.org/en/main/api/database/compact.html#db-compact).

        If the `ddoc` parameter is provided, it will compacts the view indexes associated with the specified design
        document.

        Parameters
        ----------
        ddoc : str
            A design document name.

        Returns
        -------
        bool: `True` upon compaction request successfully sent.
        &#34;&#34;&#34;
        resource = &#34;_compact&#34;
        if ddoc:
            resource += f&#34;/{ddoc}&#34;
        return self._post(
            resource=resource
        ).json().get(&#34;ok&#34;)

    def copy(
            self,
            docid: str,
            destid: str,
            rev: str = None,
            destrev: str = None
    ) -&gt; Tuple[str, bool, str]:
        &#34;&#34;&#34;
        Copy an existing document to a new or existing document. Copying a document is only possible within the same
        database. For more info, please refer to
        [the official documentation](https://docs.couchdb.org/en/main/api/document/common.html#copy--db-docid).

        Parameters
        ----------
        docid : str
            The ID of the document to copy.
        destid : str
            The target document&#39;s ID.
        rev : str
            A specific revision of the document to copy.
        destrev : str
            If the target document already exists, its current revision.

        Returns
        -------
        Tuple[str, bool, str] : A tuple consisting of the id, success message &amp; revision.
        &#34;&#34;&#34;
        destination = destid
        if destrev:
            destination += f&#34;?rev={destrev}&#34;
        data = self._request(
            method=&#34;COPY&#34;,
            resource=docid,
            headers={
                &#34;Destination&#34;: destination,
            },
            query_kwargs={
                &#34;rev&#34;: rev
            }
        ).json()
        return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]

    def create(
            self,
            doc: Union[Dict, Document],
            *,
            batch: bool = None
    ) -&gt; Tuple[str, bool, str]:
        &#34;&#34;&#34;
        Create a new document.

        Parameters
        ----------
        doc : Union[Dict, couchdb3.document.Document]
            A dictionary or a `couchdb3.document.Document` instance to be created.
        batch : bool
            Stores document in batch mode. Default `None`.

        Returns
        -------
        Tuple[str, bool, str] : A tuple consisting of the id, success message &amp; revision.
        &#34;&#34;&#34;
        data = self._post(
            body=doc,
            query_kwargs={
                &#34;batch&#34;: &#34;ok&#34; if batch is True else None
            }
        ).json()
        return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]

    def delete(
            self,
            docid: str,
            rev: str,
            *,
            batch: bool = None
    ) -&gt; bool:
        &#34;&#34;&#34;
        Delete a document.

        Parameters
        ----------
        docid : str
            The document&#39;s id.
        rev : str
            The document&#39;s current revision. If not known, one can use `Database.rev` with the given `docid`.
        batch : bool
            Stores document in batch mode. Default `None`.

        Returns
        -------
        bool : `True` upon successful deletion.
        &#34;&#34;&#34;
        self._delete(
            resource=docid,
            query_kwargs={
                &#34;rev&#34;: rev,
                &#34;batch&#34;: &#34;ok&#34; if batch is True else None
            }
        )
        return True

    def delete_attachment(
            self,
            docid: str,
            attname: str,
            rev: str,
            *,
            batch: bool = False
    ) -&gt; bool:
        &#34;&#34;&#34;
        Delete an attachment.

        Parameters
        ----------
        docid : str
            The document&#39;s id.
        attname : str
            The attachment&#39;s name.
        rev : str
            The document&#39;s current revision. If not known, one can use `Database.rev` with the given `docid`.
        batch : bool
            Stores document in batch mode. Default `None`.

        Returns
        -------
        bool : `True` upon successful deletion.
        &#34;&#34;&#34;
        self._delete(
            resource=f&#34;{docid}/{attname}&#34;,
            query_kwargs={
                &#34;rev&#34;: rev,
                &#34;batch&#34;: &#34;ok&#34; if batch is True else None
            }
        )
        return True

    def explain(
            self,
            selector: Dict,
            limit: int = 25,
            skip: int = 0,
            sort: List[Dict] = None,
            fields: List[str] = None,
            use_index: Union[str, List[str]] = None,
            conflicts: bool = False,
            r: int = 1,
            bookmark: str = None,
            update: bool = True,
            stable: bool = None,
            execution_stats: bool = False
    ) -&gt; Dict:
        &#34;&#34;&#34;
        Shows which index is being used by the query. Parameters are the same as `Database.find`.

        Parameters
        ----------
        selector : Dict
            JSON object describing criteria used to select documents. More information provided in CouchDB&#39;s section on
            [selector syntax](https://docs.couchdb.org/en/main/api/database/find.html#find-selectors).
        limit : int
            Maximum number of results returned. Default is `25`.
        skip : int
            Skip the first `n` results, where `n` is the value specified. Default is `0`.
        sort : Dict
             JSON array following CouchDB&#39;s [sort syntax]
             (https://docs.couchdb.org/en/main/api/database/find.html#find-sort). Default is `None`.
        fields : List[str]
            Dictionary specifying which fields of each object should be returned. If it is omitted, the entire object
            is returned. More information provided in CouchDB&#39;s [section on filtering fields]
            (https://docs.couchdb.org/en/main/api/database/find.html#find-filter).
        use_index : Union[str, List[str]]
            Instruct a query to use a specific index. Specified either as `&#34;&lt;design_document&gt;&#34;` or
            `[&#34;&lt;design_document&gt;&#34;, &#34;&lt;index_name&gt;&#34;]`. Default is `None`.
        conflicts : bool
            Include conflicted documents if `True`. Intended use is to easily find conflicted documents,
            without an index or view. Default is `False`.
        r : int
            Read quorum needed for the result. This defaults to 1, in which case the document found in the index is
            returned. If set to a higher value, each document is read from at least that many replicas before it is
            returned in the results. This is likely to take more time than using only the document stored locally with
            the index. Default is `None`.
        bookmark : str
            A string that enables you to specify which page of results you require. Used for paging through result
            sets. Every query returns an opaque string under the `bookmark` key that can then be passed back in a query
            to get the next page of results. If any part of the selector query changes between requests, the results
            are undefined. Default is `None`.
        update: bool
            Whether to update the index prior to returning the result. Default is `True`.
        stable : bool
            Whether or not the view results should be returned from a “stable” set of shards. Default is `None`.
        execution_stats : bool
            Include [execution statistics](https://docs.couchdb.org/en/main/api/database/find.html#find-statistics) in
            the query response. Default is `False`.

        Returns
        -------
        Dict: A dictionary containing the following keys.

          - dbname (`str`) – Name of database
          - index (`Dict`) – Index used to fulfill the query
          - selector (`Dict`) – Query selector used
          - opts (`Dict`) – Query options used
          - limit (`int`) – Limit parameter used
          - skip (`int`) – Skip parameter used
          - fields (`List`) – Fields to be returned by the query
          - range (`Dict`) – Range parameters passed to the underlying view

        &#34;&#34;&#34;
        return self._post(
            resource=&#34;_explain&#34;,
            body={
                &#34;selector&#34;: selector,
                &#34;limit&#34;: limit,
                &#34;skip&#34;: skip,
                &#34;sort&#34;: sort,
                &#34;fields&#34;: fields,
                &#34;use_index&#34;: use_index,
                &#34;conflicts&#34;: conflicts,
                &#34;r&#34;: r,
                &#34;bookmark&#34;: bookmark,
                &#34;update&#34;: update,
                &#34;stable&#34;: stable,
                &#34;execution_stats&#34;: execution_stats,
            }
        ).json()

    def find(
            self,
            selector: Dict,
            limit: int = 25,
            skip: int = 0,
            sort: List[Dict] = None,
            fields: List[str] = None,
            use_index: Union[str, List[str]] = None,
            conflicts: bool = False,
            r: int = 1,
            bookmark: str = None,
            update: bool = True,
            stable: bool = None,
            execution_stats: bool = False
    ) -&gt; Dict:
        &#34;&#34;&#34;
        Find documents using a declarative JSON querying syntax.

        Parameters
        ----------
        selector : Dict
            JSON object describing criteria used to select documents. More information provided in CouchDB&#39;s section on
            [selector syntax](https://docs.couchdb.org/en/main/api/database/find.html#find-selectors).
        limit : int
            Maximum number of results returned. Default is `25`.
        skip : int
            Skip the first `n` results, where `n` is the value specified. Default is `0`.
        sort : Dict
             JSON array following CouchDB&#39;s [sort syntax]
             (https://docs.couchdb.org/en/main/api/database/find.html#find-sort). Default is `None`.
        fields : List[str]
            Dictionary specifying which fields of each object should be returned. If it is omitted, the entire object
            is returned. More information provided in CouchDB&#39;s [section on filtering fields]
            (https://docs.couchdb.org/en/main/api/database/find.html#find-filter).
        use_index : Union[str, List[str]]
            Instruct a query to use a specific index. Specified either as `&#34;&lt;design_document&gt;&#34;` or
            `[&#34;&lt;design_document&gt;&#34;, &#34;&lt;index_name&gt;&#34;]`. Default is `None`.
        conflicts : bool
            Include conflicted documents if `True`. Intended use is to easily find conflicted documents,
            without an index or view. Default is `False`.
        r : int
            Read quorum needed for the result. This defaults to 1, in which case the document found in the index is
            returned. If set to a higher value, each document is read from at least that many replicas before it is
            returned in the results. This is likely to take more time than using only the document stored locally with
            the index. Default is `None`.
        bookmark : str
            A string that enables you to specify which page of results you require. Used for paging through result
            sets. Every query returns an opaque string under the `bookmark` key that can then be passed back in a query
            to get the next page of results. If any part of the selector query changes between requests, the results
            are undefined. Default is `None`.
        update: bool
            Whether to update the index prior to returning the result. Default is `True`.
        stable : bool
            Whether or not the view results should be returned from a “stable” set of shards. Default is `None`.
        execution_stats : bool
            Include [execution statistics](https://docs.couchdb.org/en/main/api/database/find.html#find-statistics) in
            the query response. Default is `False`.

        Returns
        -------
        Dict: A dictionary containing the following keys.

          - `bookmark`
          - `docs`
          - `warning`
        &#34;&#34;&#34;
        return self._post(
            resource=&#34;_find&#34;,
            body={
                &#34;selector&#34;: selector,
                &#34;limit&#34;: limit,
                &#34;skip&#34;: skip,
                &#34;sort&#34;: sort,
                &#34;fields&#34;: fields,
                &#34;use_index&#34;: use_index,
                &#34;conflicts&#34;: conflicts,
                &#34;r&#34;: r,
                &#34;bookmark&#34;: bookmark,
                &#34;update&#34;: update,
                &#34;stable&#34;: stable,
                &#34;execution_stats&#34;: execution_stats,
            }
        ).json()

    def indexes(
            self,
    ) -&gt; Dict:
        &#34;&#34;&#34;
        Get a list of all indexes in the database.

        Returns
        -------
        Dict : A dictionary with the following keys.

          - total_rows (`int`) – Number of indexes
          - indexes (`List[Dict]`) – Array of index definitions
        &#34;&#34;&#34;
        return self._get(resource=&#34;_index&#34;).json()

    def get(
            self,
            docid: str,
            *,
            attachments: bool = None,
            att_encoding_info: bool = None,
            atts_since: Iterable[str] = None,
            conflicts: bool = None,
            deleted_conflicts: bool = None,
            latest: bool = None,
            local_seq: bool = None,
            meta: bool = None,
            open_revs: Iterable[str] = None,
            rev: str = None,
            revs: bool = None,
            revs_info: bool = None,
            check: bool = False,
            default_value: Any = None,
    ) -&gt; Union[Document, Any]:
        &#34;&#34;&#34;
        Get a document by id.

        Parameters
        ----------
        docid : str
            The document&#39;s id.
        attachments : bool
            Includes attachments bodies in response. Default `None`.
        att_encoding_info : bool
            Includes encoding information in attachment stubs if the particular attachment is compressed.
            Default `None`.
        atts_since : Iterable[str]
            Includes attachments only since specified revisions. Doesn’t includes attachments for specified revisions.
            Default `None`.
        conflicts : bool
            Includes information about conflicts in document. Default `None`.
        deleted_conflicts : bool
            Includes information about deleted conflicted revisions. Default `None`.
        latest : bool
            Forces retrieving latest “leaf” revision, no matter what rev was requested. Default `None`.
        local_seq : bool
            Includes last update sequence for the document. Default `None`.
        meta : bool
            Acts same as specifying all conflicts, deleted_conflicts and revs_info query parameters. Default `None`.
        open_revs : Iterable[str]
            Retrieves documents of specified leaf revisions. Additionally, it accepts value as all to return all leaf
            revisions. Default `None`.
        rev : str
            Retrieves document of specified revision. Default `None`.
        revs : bool
            Includes list of all known document revisions. Default `None`.
        revs_info : bool
            Includes detailed information for all known document revisions. Default `None`.
        check : bool
            If `True`, raise an exception if `docid` cannot be found in the database. Default `False`.
        default_value : Any
            The default value to return if `check=False` and the `docid` is not in the database. Default `None`.

        Returns
        -------
        `couchdb3.document.Document`
        &#34;&#34;&#34;
        try:
            return Document(**self._get(
                resource=docid,
                query_kwargs={
                    &#34;attachments&#34;: attachments,
                    &#34;att_encoding_info&#34;: att_encoding_info,
                    &#34;atts_since&#34;: atts_since,
                    &#34;conflicts&#34;: conflicts,
                    &#34;deleted_conflicts&#34;: deleted_conflicts,
                    &#34;latest&#34;: latest,
                    &#34;local_seq&#34;: local_seq,
                    &#34;meta&#34;: meta,
                    &#34;open_revs&#34;: open_revs,
                    &#34;rev&#34;: rev,
                    &#34;revs&#34;: revs,
                    &#34;revs_info&#34;: revs_info
                }
            ).json())
        except (CouchDBError, requests.exceptions.RequestException) as error:
            if check is True:
                raise error
            return default_value

    def get_attachment(
            self,
            docid: str,
            attname: str,
            rev: str = None
    ) -&gt; AttachmentDocument:
        &#34;&#34;&#34;
        Get a document&#39;s attachment

        Parameters
        ----------
        docid : str
            The document&#39;s id.
        attname : str
            The attachment&#39;s name.
        rev : str
            A specific revision.

        Returns
        -------
        AttachmentDocument : A `couchdb3.document.AttachmentDocument` instance.
        &#34;&#34;&#34;
        response = self._get(
            f&#34;{docid}/{attname}&#34;,
            query_kwargs={&#34;rev&#34;: rev}
        )
        return AttachmentDocument(
            content=response.content,
            content_encoding=response.headers.get(&#34;content-encoding&#34;),
            content_length=response.headers.get(&#34;content-length&#34;),
            content_type=response.headers.get(&#34;content-type&#34;),
            digest=&#34;md5-&#34; + response.headers.get(&#34;content-md5&#34;),
        )

    def get_design(
            self,
            ddoc: str,
            **kwargs
    ) -&gt; Document:
        &#34;&#34;&#34;
        Get a design document.

        Parameters
        ----------
        ddoc: str
            The design document&#39;s name.
        kwargs
            Further `Database.get` parameters.

        Returns
        -------
        Document : A `couchdb3.document.Document` object containing the design document&#39;s content.
        &#34;&#34;&#34;
        return self.get(docid=f&#34;_design/{ddoc}&#34;, **kwargs)

    def purge(
            self,
            data: Dict
    ) -&gt; Dict:
        &#34;&#34;&#34;
        Purge permanently the given pairs of `(id,rev)`. When deleting a (revisions of a) document, the document is
        marked as `_deleted=true` as opposed to being completely purged. For more info, please refer to
        [the official documentation](https://docs.couchdb.org/en/main/api/database/misc.html#db-purge).

        Parameters
        ----------
        data : Dict
            A dictionary with document IDs as keys and list of revisions as values.

        Returns
        -------

        &#34;&#34;&#34;
        return self._post(
            resource=&#34;_purge&#34;,
            body=data
        ).json()

    def put_attachment(
            self,
            docid: str,
            attname: str,
            path: str = None,
            *,
            content: Any = None,
            rev: str = None,
    ) -&gt; Tuple[str, bool, str]:
        &#34;&#34;&#34;
        Uploads the supplied content as an attachment to the specified document.
        The appropriate content-type is generated using `couchdb3.utils.content_type_getter`.

        Parameters
        ----------
        docid : str
            The document&#39;s id.
        attname : str
            The attachment&#39;s name.
        path : str
            The path ot the local file to be uploaded.
            Precisely one of the arguments `path` or `content` must be supplied.
        content : str
            The content to be uploaded.
            Precisely one of the arguments `path` or `content` must be supplied.
        rev : str
            The document&#39;s current revision. Must be supplied for existing documents.

        Returns
        -------
        Tuple[str, bool, str] : A tuple consisting of the following elements.

          - the document&#39;s id ( `str`)
          - the operation status (`bool`)
          - the revision ( `str`)
        &#34;&#34;&#34;
        if (not content and not path) or (content and path):
            raise ValueError(&#34;Precisely one of the arguments \&#34;attdata\&#34; and  \&#34;attloc\&#34; must be provided.&#34;)
        content_type = content_type_getter(data=content, file_name=path)
        resource = f&#34;{docid}/{attname}&#34;
        query_kwargs = {&#34;rev&#34;: rev}
        req_kwargs = {
            &#34;headers&#34;: {
                &#34;content-type&#34;: content_type_getter(data=content, file_name=path)
            }
        }
        if path:
            with open(path, &#34;rb&#34;) as file:
                response = self._put(
                    resource=resource,
                    query_kwargs=query_kwargs,
                    data=file,
                    headers={
                        &#34;content-type&#34;: content_type
                    }
                )
        else:
            req_kwargs.update({&#34;body&#34;: content})
            response = self._put(
                resource=resource,
                query_kwargs=query_kwargs,
                body=content,
                headers={
                    &#34;content-type&#34;: content_type
                }
            )
        data = response.json()
        return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]

    def put_design(
            self,
            ddoc: str,
            *,
            rev: str = None,
            language: str = None,
            options: Dict = None,
            filters: Dict = None,
            updates: Dict = None,
            validate_doc_update: str = None,
            views: Dict = None,
            autoupdate: bool = None,
            **kwargs
    ) -&gt; Tuple[str, bool, str]:
        &#34;&#34;&#34;
        Create or update a named design document. For more info, please refer to
        [the official documentation](https://docs.couchdb.org/en/latest/api/ddoc/common.html#put--db-_design-ddoc).

        Parameters
        ----------
        ddoc : str
            The design document&#39;s name.
        rev : str
            The design document&#39;s revision in case of an update.
        language : str
            Defines [Query Server](https://docs.couchdb.org/en/latest/query-server/index.html#query-server) to process
            design document functions.
        options : Dict
            View’s default options.
        filters : Dict
            [Filter functions](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#filterfun) definition.
        updates : Dict
            [Update functions](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#updatefun) definition.
        validate_doc_update : str
            [Validate document update](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#vdufun) function source.
        views : Dict
            [View functions](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#viewfun) definition.
        autoupdate : bool
            Indicates whether to automatically build indexes defined in this design document.
        kwargs
        Further `Database.save` parameters.

        Returns
        -------
        Tuple[str, bool, str] : The document&#39;s id ( `str`), the operation status (`bool`) and the revision ( `str`).
        &#34;&#34;&#34;
        return self.save(
            doc={
                &#34;_id&#34;: f&#34;_design/{ddoc}&#34;,
                &#34;_rev&#34;: rev,
                &#34;language&#34;: language,
                &#34;options&#34;: options,
                &#34;filters&#34;: filters,
                &#34;updates&#34;: updates,
                &#34;validate_doc_update&#34;: validate_doc_update,
                &#34;views&#34;: views,
                &#34;autoupdate&#34;: autoupdate
            },
            **kwargs
        )

    def save(
            self,
            doc: Union[Dict, Document],
            batch: bool = None,
            new_edits: bool = None,
            path: str = None
    ) -&gt; Tuple[str, bool, str]:
        &#34;&#34;&#34;
        Create a new named document, or a new revision of the existing document.

        Parameters
        ----------
        doc : Union[Dict, couchdb3.document.Document]
            A dictionary or a `couchdb3.document.Document` instance containing a valid identifier (`doc[&#34;_id&#34;]`)
            as well as revision number (`doc[&#34;_rev&#34;]`) if need be.
        batch : bool
            Store document in batch mode. Default `None`.
        new_edits : bool
            Prevents insertion of a conflicting document. If false, a well-formed _rev must be included in the document.
            `new_edits=False` is used by the replicator to insert documents into the target database even if that leads
            to the creation of conflicts.
        path : str
            Database path, e.g `_design`. Default `None`.

        Returns
        -------
        Tuple[str, bool, str] : The document&#39;s id ( `str`), the operation status (`bool`) and the revision ( `str`).
        &#34;&#34;&#34;
        &#34;&#34;&#34;
        :return: 
        &#34;&#34;&#34;
        batch = &#34;ok&#34; if batch else None
        data = self._put(
            resource=&#34;%s/%s&#34; % (path, doc.get(&#34;_id&#34;)) if path else doc.get(&#34;_id&#34;),
            body=doc,
            query_kwargs={
                &#34;batch&#34;: &#34;ok&#34; if batch else None,
                &#34;new_edits&#34;: new_edits,
                &#34;rev&#34;: doc.get(&#34;_rev&#34;)
            }
        ).json()
        return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]

    def save_index(
            self,
            index: Dict,
            ddoc: str = None,
            name: str = None,
            index_type: str = &#34;json&#34;,
            partitioned: bool = None
    ) -&gt; Tuple[str, str, str]:
        &#34;&#34;&#34;
        Create a new index on a database.

        Parameters
        ----------
        index : Dict
            Dictionary describing the index to create.
        ddoc : str
            Name of the design document in which the index will be created. By default, each index will be created in
            its own design document. Indexes can be grouped into design documents for efficiency. However, a change to
            one index in a design document will invalidate all other indexes in the same document (similar to views).
        name : str
            Name of the index. If no name is provided, a name will be generated automatically.
        index_type : str
            Can be `json`  or `text`. Defaults to `json`. Geospatial indexes will be supported in the future. Optional
            Text indexes are supported via a third party library
        partitioned : bool
             Determines whether a JSON index is partitioned or global. The default value of `partitioned` is the
             `partitioned` property of the database. To create a global index on a partitioned database, specify `False`
             for the `&#34;partitioned&#34;` field. If you specify `True` for the `&#34;partitioned&#34;` field on an unpartitioned
             database, an error occurs.

        Returns
        -------
        Tuple[str, str, str]: A tuple consisting of the following elements.

          - result (`str`) – Flag to show whether the index was created or one already exists. Can be `&#34;created&#34;` or
          `&#34;exists&#34;`.
          - id (`str`) – Id of the design document the index was created in.
          - name (`str`) – Name of the index created.
        &#34;&#34;&#34;
        data = self._post(
            resource=&#34;_index&#34;,
            body={
                &#34;index&#34;: index,
                &#34;ddoc&#34;: ddoc,
                &#34;name&#34;: name,
                &#34;type&#34;: index_type,
                &#34;partitioned&#34;: partitioned
            }
        ).json()
        return data[&#34;result&#34;], data[&#34;id&#34;], data[&#34;name&#34;]

    def security(
            self
    ) -&gt; SecurityDocument:
        &#34;&#34;&#34;
        Returns the current security object from the specified database.

        Returns
        -------
        SecurityDocument : A `couchdb3.document.SecurityDocument` object.
        &#34;&#34;&#34;
        data = self._get(
            resource=&#34;_security&#34;
        ).json()
        return SecurityDocument(**data)

    def update_security(
            self,
            admins: Union[Dict, SecurityDocumentElement],
            members: Union[Dict, SecurityDocumentElement],
    ) -&gt; bool:
        &#34;&#34;&#34;
        Update database security.

        Parameters
        ----------
        admins : Union[Dict, SecurityDocumentElement]
            Object with two fields as `names` and `roles`. [See the official
            documentation](https://docs.couchdb.org/en/main/api/database/security.html#db-security) for more info.
        members : Union[Dict, SecurityDocumentElement]
            Object with two fields as `names` and `roles`. [See the official
            documentation](https://docs.couchdb.org/en/main/api/database/security.html#db-security) for more info.

        Returns
        -------
        bool :  Operation status.
        &#34;&#34;&#34;
        return self._put(
            resource=&#34;_security&#34;,
            body={
                &#34;admins&#34;: admins,
                &#34;members&#34;: members
            }
        ).json()[&#34;ok&#34;]

    def view(
            self,
            ddoc: str,
            view: str = None,
            *,
            conflicts: bool = None,
            descending: bool = None,
            endkey: str = None,
            endkey_docid: str = None,
            group: bool = None,
            group_level: int = None,
            include_docs: bool = None,
            attachments: bool = None,
            att_encoding_info: bool = None,
            inclusive_end: bool = None,
            key: str = None,
            keys: Iterable[str] = None,
            limit: int = None,
            reduce: bool = None,
            skip: int = None,
            sort: bool = None,
            stable: bool = None,
            startkey: str = None,
            startkey_docid: str = None,
            update: str = None,
            update_seq: bool = None
    ) -&gt; ViewResult:
        &#34;&#34;&#34;
        Executes the specified view function from the specified design documen, c.f [the official
        documentation](https://docs.couchdb.org/en/main/api/ddoc/views.html#db-design-design-doc-view-view-name).

        Parameters
        ----------
        ddoc : str
            The corresponding design document&#39;s id.
        view : str
            The view&#39;s id.
        conflicts : bool
            Include conflicts information in response. Ignored if `include_docs` isn’t `True`. Default is `None`.
        descending : bool
            Return the documents in descending order by key. Default is `None`.
        endkey : str
             Stop returning records when the specified key is reached. Default is `None`
        endkey_docid: str
            Stop returning records when the specified document ID is reached. Ignored if `endkey` is not set. Default
            is `None`.
        group: bool
            Group the results using the reduce function to a group or single row. Implies `reduce` is `true` and the
            maximum `group_level`. Default is `None`.
        group_level : int
             Specify the group level to be used. Implies group is true. Default is `None`.
        include_docs : bool
            Include the associated document with each row. Default is `None`.
        attachments : bool
            Include the Base64-encoded content of attachments in the documents that are included if `include_docs` is
            `True`. Ignored if `include_docs` isn’t `True`. Default is `None`.
        att_encoding_info : bool
            Include encoding information in attachment stubs if `include_docs` is `True` and the particular attachment
            is compressed. Ignored if `include_docs` isn’t `True`. Default is `False`.
        inclusive_end : bool
            Specifies whether the specified end key should be included in the result. Default is `None`.
        key : str
            Return only documents that match the specified key. Default is `None`.
        keys: Iterable[str]
            Return only documents where the key matches one of the keys specified in the argument. Default is `None`.
        limit : int
            Limit the number of the returned documents to the specified number.  Default is `None`.
        reduce : bool
            Use the reduction function. Default is `True` when a reduce function is defined. Default is `None`.
        skip : int
            Skip this number of records before starting to return the results. Default is `None`.
        sort : bool
            Sort returned rows (see Sorting Returned Rows). Setting this to `False` offers a performance boost. The
            `total_rows` and `offset` fields are not available when this is set to `False`. Default is `None`.
        stable : bool
            Whether or not the view results should be returned from a stable set of shards. Default is `None`.
        startkey : str
            Return records starting with the specified key. Default is `None`
        startkey_docid : str
            Return records starting with the specified document ID. Ignored if `startkey` is not set. Default is `None`
        update : str
            Whether or not the view in question should be updated prior to responding to the user. Supported values:

            - `true`
            - `false`
            - `lazy`

            Default is `None`.
        update_seq : bool
             Whether to include in the response an `update_seq` value indicating the sequence id of the database the
             view reflects. Default is `False`.

        Returns
        -------
        `view.ViewResult`
        &#34;&#34;&#34;
        return ViewResult(**self._get(
            resource=f&#34;_design/{ddoc}/_view/{view}&#34; if (ddoc and view) else ddoc,
            query_kwargs={
                &#34;conflicts&#34;: conflicts,
                &#34;descending&#34;: descending,
                &#34;endkey&#34;: endkey,
                &#34;endkey_docid&#34;: endkey_docid,
                &#34;group&#34;: group,
                &#34;group_level&#34;: group_level,
                &#34;include_docs&#34;: include_docs,
                &#34;attachments&#34;: attachments,
                &#34;att_encoding_info&#34;: att_encoding_info,
                &#34;inclusive_end&#34;: inclusive_end,
                &#34;key&#34;: key,
                &#34;keys&#34;: keys,
                &#34;limit&#34;: limit,
                &#34;reduce&#34;: reduce,
                &#34;skip&#34;: skip,
                &#34;sorted&#34;: sort,
                &#34;stable&#34;: stable,
                &#34;startkey&#34;: startkey,
                &#34;startkey_docid&#34;: startkey_docid,
                &#34;update&#34;: update,
                &#34;update_seq&#34;: update_seq
            }
        ).json())</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="couchdb3.database.Database"><code class="flex name class">
<span>class <span class="ident">Database</span></span>
<span>(</span><span>name: str, *, url: str = None, port: int = None, user: str = None, password: str = None, disable_ssl_verification: bool = False, auth_method: str = None, timeout: int = 300, session: requests.sessions.Session = None)</span>
</code></dt>
<dd>
<div class="desc"><p>Abstract Couchdb database</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the database.</dd>
<dt><strong><code>url</code></strong> :&ensp;<code>str</code></dt>
<dd>The url of the CouchDB server formatted as <code>scheme://user:password@host:port</code>. For example:<pre><code>"http://user:password@127.0.0.1:5984"
"https://couchdb.example.com"
</code></pre>
</dd>
<dt><strong><code>port</code></strong> :&ensp;<code>int</code></dt>
<dd>The port of the CouchDB server. Can also be supplied via the url.</dd>
<dt><strong><code>user</code></strong> :&ensp;<code>str</code></dt>
<dd>The CouchDB admin username. Can also be supplied via the url.</dd>
<dt><strong><code>password</code></strong> :&ensp;<code>str</code></dt>
<dd>The CouchDB admin password. Can also be supplied via the url.</dd>
<dt><strong><code>disable_ssl_verification</code></strong> :&ensp;<code>bool</code></dt>
<dd>Controls whether to verify the server’s TLS certificate. Set to <code>True</code> when connecting to a server with
self-signed TLS certificates. Default <code>False</code>.</dd>
<dt><strong><code>auth_method</code></strong> :&ensp;<code>str</code></dt>
<dd>Authentication method. Choices are <code>cookie</code> or <code>basic</code>. Default is <code><a title="couchdb3.utils.DEFAULT_AUTH_METHOD" href="utils.html#couchdb3.utils.DEFAULT_AUTH_METHOD">DEFAULT_AUTH_METHOD</a></code>.</dd>
<dt><strong><code>timeout</code></strong> :&ensp;<code>int</code></dt>
<dd>The default timeout for requests. Default c.f. <code><a title="couchdb3.utils.DEFAULT_TIMEOUT" href="utils.html#couchdb3.utils.DEFAULT_TIMEOUT">DEFAULT_TIMEOUT</a></code>.</dd>
<dt><strong><code>session</code></strong> :&ensp;<code>requests.Session</code></dt>
<dd>A specific session to use. Optional - if not provided, a new session will be initialized.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Database(Base):
    &#34;&#34;&#34;
    Abstract Couchdb database
    &#34;&#34;&#34;
    def __init__(
            self,
            name: str,
            *,
            url: str = None,
            port: int = None,
            user: str = None,
            password: str = None,
            disable_ssl_verification: bool = False,
            auth_method: str = None,
            timeout: int = DEFAULT_TIMEOUT,
            session: requests.Session = None,
    ) -&gt; None:
        &#34;&#34;&#34;

        Parameters
        ----------
        name : str
            The name of the database.
        url : str
            The url of the CouchDB server formatted as `scheme://user:password@host:port`. For example:

                &#34;http://user:password@127.0.0.1:5984&#34;
                &#34;https://couchdb.example.com&#34;
        port : int
            The port of the CouchDB server. Can also be supplied via the url.
        user : str
            The CouchDB admin username. Can also be supplied via the url.
        password : str
            The CouchDB admin password. Can also be supplied via the url.
        disable_ssl_verification : bool
            Controls whether to verify the server’s TLS certificate. Set to `True` when connecting to a server with
            self-signed TLS certificates. Default `False`.
        auth_method : str
            Authentication method. Choices are `cookie` or `basic`. Default is `couchdb3.utils.DEFAULT_AUTH_METHOD`.
        timeout : int
            The default timeout for requests. Default c.f. `couchdb3.utils.DEFAULT_TIMEOUT`.
        session: requests.Session
            A specific session to use. Optional - if not provided, a new session will be initialized.
        &#34;&#34;&#34;
        super(Database, self).__init__(
            url=url,
            session=session,
            port=port,
            user=user,
            password=password,
            disable_ssl_verification=disable_ssl_verification,
            auth_method=auth_method,
            timeout=timeout
        )
        if validate_db_name(name=name) is False:
            raise NameComplianceError(
                &#34;Database name does not comply with the CouchDB requirements. &#34;
                &#34;See https://docs.couchdb.org/en/latest/api/database/common.html#put--db.&#34;
            )
        self.name = name
        self.root = name

    def __getitem__(self, item) -&gt; Document:
        return self.get(docid=item, check=True)

    def __repr__(self) -&gt; str:
        &#34;&#34;&#34;
        Basic repr.

        Returns
        -------
        str : The instance&#39;s representation.
        &#34;&#34;&#34;
        return f&#34;{super(Database, self).__repr__()}: {self.name}&#34;

    def all_docs(
            self,
            partition: str = None,
            keys: Iterable[str] = None,
            **kwargs
    ) -&gt; ViewResult:
        &#34;&#34;&#34;
        Executes the built-in _all_docs view, returning all of the documents in the database.

        Parameters
        ----------
        partition : str
            Filter using the partition&#39;s name (only valid for partitioned databases). Default is `None`.
        keys : Iterable[str]
            Return only documents where the key matches one of the keys specified in the argument. Default is `None`.
        kwargs
            Further `couchdb3.database.Database.view` parameters.

        Returns
        -------
        ViewResult
        &#34;&#34;&#34;
        return self.view(
            f&#34;_partition/{partition}/_all_docs&#34; if partition else &#34;_all_docs&#34;,
            keys=keys,
            **kwargs
        )

    def bulk_docs(
            self,
            docs: List[Union[Dict, Document]],
            new_edits: bool = True
    ) -&gt; List[Dict]:
        &#34;&#34;&#34;
        The bulk document API allows you to create and update multiple documents at the same time within a single
        request. The basic operation is similar to creating or updating a single document, except that you batch the
        document structure and information.

        When creating new documents the document ID (`_id`) is optional.

        For updating existing documents, you must provide the document ID, revision information (`_rev`), and new
        document values.

        In case of batch deleting documents all fields as document ID, revision information and deletion status
        (`_deleted`) are required.

        Parameters
        ----------
        docs : List[Union[Dict, Document]]
             List of documents objects
        new_edits : bool
            If `False`, prevents the database from assigning them new revision IDs. Default `True`.

        Returns
        -------
        List[Dict] : A list of dictionaries containing the following keys.

          - `id` the document&#39;s id
          - `ok` operation status
          - `rev` the document&#39;s revision
        &#34;&#34;&#34;
        return self._post(
            resource=&#34;_bulk_docs&#34;,
            body={
                &#34;docs&#34;: docs,
                &#34;new_edits&#34;: new_edits
            }
        ).json()

    def bulk_get(
            self,
            docs: List[Union[Dict, Document]],
            revs: bool = False
    ) -&gt; List[Dict]:
        &#34;&#34;&#34;
        This method can be called to query several documents in bulk. It is well suited for fetching a specific
        revision of documents, as replicators do for example, or for getting revision history.

        Parameters
        ----------
        docs : List[Union[Dict, Document]]
            List of document objects, with `id`, and optionally `rev` and `atts_since`.
        revs : bool
             Give the revisions history.

        Returns
        -------
        List[Dict] : An array of results for each requested document/rev pair.

          - `id` key lists the requested
          document ID,
          - `docs` contains a single-item array of objects, each of which has either an `error` key and value describing
          the error, or `ok` key and associated value of the requested document, with the additional _revisions property
          that lists the parent revisions if `revs=true`.
        &#34;&#34;&#34;
        return self._post(
            resource=&#34;_bulk_get&#34;,
            body={
                &#34;docs&#34;: [extract_document_id_and_rev(_) for _ in docs]
            },
            query_kwargs={
                &#34;revs&#34;: revs
            }
        ).json().get(&#34;results&#34;, [])

    def compact(
            self,
            ddoc: str = None
    ) -&gt; bool:
        &#34;&#34;&#34;
        Request compaction of the database. For more info, please refer to
        [the official documentation](https://docs.couchdb.org/en/main/api/database/compact.html#db-compact).

        If the `ddoc` parameter is provided, it will compacts the view indexes associated with the specified design
        document.

        Parameters
        ----------
        ddoc : str
            A design document name.

        Returns
        -------
        bool: `True` upon compaction request successfully sent.
        &#34;&#34;&#34;
        resource = &#34;_compact&#34;
        if ddoc:
            resource += f&#34;/{ddoc}&#34;
        return self._post(
            resource=resource
        ).json().get(&#34;ok&#34;)

    def copy(
            self,
            docid: str,
            destid: str,
            rev: str = None,
            destrev: str = None
    ) -&gt; Tuple[str, bool, str]:
        &#34;&#34;&#34;
        Copy an existing document to a new or existing document. Copying a document is only possible within the same
        database. For more info, please refer to
        [the official documentation](https://docs.couchdb.org/en/main/api/document/common.html#copy--db-docid).

        Parameters
        ----------
        docid : str
            The ID of the document to copy.
        destid : str
            The target document&#39;s ID.
        rev : str
            A specific revision of the document to copy.
        destrev : str
            If the target document already exists, its current revision.

        Returns
        -------
        Tuple[str, bool, str] : A tuple consisting of the id, success message &amp; revision.
        &#34;&#34;&#34;
        destination = destid
        if destrev:
            destination += f&#34;?rev={destrev}&#34;
        data = self._request(
            method=&#34;COPY&#34;,
            resource=docid,
            headers={
                &#34;Destination&#34;: destination,
            },
            query_kwargs={
                &#34;rev&#34;: rev
            }
        ).json()
        return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]

    def create(
            self,
            doc: Union[Dict, Document],
            *,
            batch: bool = None
    ) -&gt; Tuple[str, bool, str]:
        &#34;&#34;&#34;
        Create a new document.

        Parameters
        ----------
        doc : Union[Dict, couchdb3.document.Document]
            A dictionary or a `couchdb3.document.Document` instance to be created.
        batch : bool
            Stores document in batch mode. Default `None`.

        Returns
        -------
        Tuple[str, bool, str] : A tuple consisting of the id, success message &amp; revision.
        &#34;&#34;&#34;
        data = self._post(
            body=doc,
            query_kwargs={
                &#34;batch&#34;: &#34;ok&#34; if batch is True else None
            }
        ).json()
        return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]

    def delete(
            self,
            docid: str,
            rev: str,
            *,
            batch: bool = None
    ) -&gt; bool:
        &#34;&#34;&#34;
        Delete a document.

        Parameters
        ----------
        docid : str
            The document&#39;s id.
        rev : str
            The document&#39;s current revision. If not known, one can use `Database.rev` with the given `docid`.
        batch : bool
            Stores document in batch mode. Default `None`.

        Returns
        -------
        bool : `True` upon successful deletion.
        &#34;&#34;&#34;
        self._delete(
            resource=docid,
            query_kwargs={
                &#34;rev&#34;: rev,
                &#34;batch&#34;: &#34;ok&#34; if batch is True else None
            }
        )
        return True

    def delete_attachment(
            self,
            docid: str,
            attname: str,
            rev: str,
            *,
            batch: bool = False
    ) -&gt; bool:
        &#34;&#34;&#34;
        Delete an attachment.

        Parameters
        ----------
        docid : str
            The document&#39;s id.
        attname : str
            The attachment&#39;s name.
        rev : str
            The document&#39;s current revision. If not known, one can use `Database.rev` with the given `docid`.
        batch : bool
            Stores document in batch mode. Default `None`.

        Returns
        -------
        bool : `True` upon successful deletion.
        &#34;&#34;&#34;
        self._delete(
            resource=f&#34;{docid}/{attname}&#34;,
            query_kwargs={
                &#34;rev&#34;: rev,
                &#34;batch&#34;: &#34;ok&#34; if batch is True else None
            }
        )
        return True

    def explain(
            self,
            selector: Dict,
            limit: int = 25,
            skip: int = 0,
            sort: List[Dict] = None,
            fields: List[str] = None,
            use_index: Union[str, List[str]] = None,
            conflicts: bool = False,
            r: int = 1,
            bookmark: str = None,
            update: bool = True,
            stable: bool = None,
            execution_stats: bool = False
    ) -&gt; Dict:
        &#34;&#34;&#34;
        Shows which index is being used by the query. Parameters are the same as `Database.find`.

        Parameters
        ----------
        selector : Dict
            JSON object describing criteria used to select documents. More information provided in CouchDB&#39;s section on
            [selector syntax](https://docs.couchdb.org/en/main/api/database/find.html#find-selectors).
        limit : int
            Maximum number of results returned. Default is `25`.
        skip : int
            Skip the first `n` results, where `n` is the value specified. Default is `0`.
        sort : Dict
             JSON array following CouchDB&#39;s [sort syntax]
             (https://docs.couchdb.org/en/main/api/database/find.html#find-sort). Default is `None`.
        fields : List[str]
            Dictionary specifying which fields of each object should be returned. If it is omitted, the entire object
            is returned. More information provided in CouchDB&#39;s [section on filtering fields]
            (https://docs.couchdb.org/en/main/api/database/find.html#find-filter).
        use_index : Union[str, List[str]]
            Instruct a query to use a specific index. Specified either as `&#34;&lt;design_document&gt;&#34;` or
            `[&#34;&lt;design_document&gt;&#34;, &#34;&lt;index_name&gt;&#34;]`. Default is `None`.
        conflicts : bool
            Include conflicted documents if `True`. Intended use is to easily find conflicted documents,
            without an index or view. Default is `False`.
        r : int
            Read quorum needed for the result. This defaults to 1, in which case the document found in the index is
            returned. If set to a higher value, each document is read from at least that many replicas before it is
            returned in the results. This is likely to take more time than using only the document stored locally with
            the index. Default is `None`.
        bookmark : str
            A string that enables you to specify which page of results you require. Used for paging through result
            sets. Every query returns an opaque string under the `bookmark` key that can then be passed back in a query
            to get the next page of results. If any part of the selector query changes between requests, the results
            are undefined. Default is `None`.
        update: bool
            Whether to update the index prior to returning the result. Default is `True`.
        stable : bool
            Whether or not the view results should be returned from a “stable” set of shards. Default is `None`.
        execution_stats : bool
            Include [execution statistics](https://docs.couchdb.org/en/main/api/database/find.html#find-statistics) in
            the query response. Default is `False`.

        Returns
        -------
        Dict: A dictionary containing the following keys.

          - dbname (`str`) – Name of database
          - index (`Dict`) – Index used to fulfill the query
          - selector (`Dict`) – Query selector used
          - opts (`Dict`) – Query options used
          - limit (`int`) – Limit parameter used
          - skip (`int`) – Skip parameter used
          - fields (`List`) – Fields to be returned by the query
          - range (`Dict`) – Range parameters passed to the underlying view

        &#34;&#34;&#34;
        return self._post(
            resource=&#34;_explain&#34;,
            body={
                &#34;selector&#34;: selector,
                &#34;limit&#34;: limit,
                &#34;skip&#34;: skip,
                &#34;sort&#34;: sort,
                &#34;fields&#34;: fields,
                &#34;use_index&#34;: use_index,
                &#34;conflicts&#34;: conflicts,
                &#34;r&#34;: r,
                &#34;bookmark&#34;: bookmark,
                &#34;update&#34;: update,
                &#34;stable&#34;: stable,
                &#34;execution_stats&#34;: execution_stats,
            }
        ).json()

    def find(
            self,
            selector: Dict,
            limit: int = 25,
            skip: int = 0,
            sort: List[Dict] = None,
            fields: List[str] = None,
            use_index: Union[str, List[str]] = None,
            conflicts: bool = False,
            r: int = 1,
            bookmark: str = None,
            update: bool = True,
            stable: bool = None,
            execution_stats: bool = False
    ) -&gt; Dict:
        &#34;&#34;&#34;
        Find documents using a declarative JSON querying syntax.

        Parameters
        ----------
        selector : Dict
            JSON object describing criteria used to select documents. More information provided in CouchDB&#39;s section on
            [selector syntax](https://docs.couchdb.org/en/main/api/database/find.html#find-selectors).
        limit : int
            Maximum number of results returned. Default is `25`.
        skip : int
            Skip the first `n` results, where `n` is the value specified. Default is `0`.
        sort : Dict
             JSON array following CouchDB&#39;s [sort syntax]
             (https://docs.couchdb.org/en/main/api/database/find.html#find-sort). Default is `None`.
        fields : List[str]
            Dictionary specifying which fields of each object should be returned. If it is omitted, the entire object
            is returned. More information provided in CouchDB&#39;s [section on filtering fields]
            (https://docs.couchdb.org/en/main/api/database/find.html#find-filter).
        use_index : Union[str, List[str]]
            Instruct a query to use a specific index. Specified either as `&#34;&lt;design_document&gt;&#34;` or
            `[&#34;&lt;design_document&gt;&#34;, &#34;&lt;index_name&gt;&#34;]`. Default is `None`.
        conflicts : bool
            Include conflicted documents if `True`. Intended use is to easily find conflicted documents,
            without an index or view. Default is `False`.
        r : int
            Read quorum needed for the result. This defaults to 1, in which case the document found in the index is
            returned. If set to a higher value, each document is read from at least that many replicas before it is
            returned in the results. This is likely to take more time than using only the document stored locally with
            the index. Default is `None`.
        bookmark : str
            A string that enables you to specify which page of results you require. Used for paging through result
            sets. Every query returns an opaque string under the `bookmark` key that can then be passed back in a query
            to get the next page of results. If any part of the selector query changes between requests, the results
            are undefined. Default is `None`.
        update: bool
            Whether to update the index prior to returning the result. Default is `True`.
        stable : bool
            Whether or not the view results should be returned from a “stable” set of shards. Default is `None`.
        execution_stats : bool
            Include [execution statistics](https://docs.couchdb.org/en/main/api/database/find.html#find-statistics) in
            the query response. Default is `False`.

        Returns
        -------
        Dict: A dictionary containing the following keys.

          - `bookmark`
          - `docs`
          - `warning`
        &#34;&#34;&#34;
        return self._post(
            resource=&#34;_find&#34;,
            body={
                &#34;selector&#34;: selector,
                &#34;limit&#34;: limit,
                &#34;skip&#34;: skip,
                &#34;sort&#34;: sort,
                &#34;fields&#34;: fields,
                &#34;use_index&#34;: use_index,
                &#34;conflicts&#34;: conflicts,
                &#34;r&#34;: r,
                &#34;bookmark&#34;: bookmark,
                &#34;update&#34;: update,
                &#34;stable&#34;: stable,
                &#34;execution_stats&#34;: execution_stats,
            }
        ).json()

    def indexes(
            self,
    ) -&gt; Dict:
        &#34;&#34;&#34;
        Get a list of all indexes in the database.

        Returns
        -------
        Dict : A dictionary with the following keys.

          - total_rows (`int`) – Number of indexes
          - indexes (`List[Dict]`) – Array of index definitions
        &#34;&#34;&#34;
        return self._get(resource=&#34;_index&#34;).json()

    def get(
            self,
            docid: str,
            *,
            attachments: bool = None,
            att_encoding_info: bool = None,
            atts_since: Iterable[str] = None,
            conflicts: bool = None,
            deleted_conflicts: bool = None,
            latest: bool = None,
            local_seq: bool = None,
            meta: bool = None,
            open_revs: Iterable[str] = None,
            rev: str = None,
            revs: bool = None,
            revs_info: bool = None,
            check: bool = False,
            default_value: Any = None,
    ) -&gt; Union[Document, Any]:
        &#34;&#34;&#34;
        Get a document by id.

        Parameters
        ----------
        docid : str
            The document&#39;s id.
        attachments : bool
            Includes attachments bodies in response. Default `None`.
        att_encoding_info : bool
            Includes encoding information in attachment stubs if the particular attachment is compressed.
            Default `None`.
        atts_since : Iterable[str]
            Includes attachments only since specified revisions. Doesn’t includes attachments for specified revisions.
            Default `None`.
        conflicts : bool
            Includes information about conflicts in document. Default `None`.
        deleted_conflicts : bool
            Includes information about deleted conflicted revisions. Default `None`.
        latest : bool
            Forces retrieving latest “leaf” revision, no matter what rev was requested. Default `None`.
        local_seq : bool
            Includes last update sequence for the document. Default `None`.
        meta : bool
            Acts same as specifying all conflicts, deleted_conflicts and revs_info query parameters. Default `None`.
        open_revs : Iterable[str]
            Retrieves documents of specified leaf revisions. Additionally, it accepts value as all to return all leaf
            revisions. Default `None`.
        rev : str
            Retrieves document of specified revision. Default `None`.
        revs : bool
            Includes list of all known document revisions. Default `None`.
        revs_info : bool
            Includes detailed information for all known document revisions. Default `None`.
        check : bool
            If `True`, raise an exception if `docid` cannot be found in the database. Default `False`.
        default_value : Any
            The default value to return if `check=False` and the `docid` is not in the database. Default `None`.

        Returns
        -------
        `couchdb3.document.Document`
        &#34;&#34;&#34;
        try:
            return Document(**self._get(
                resource=docid,
                query_kwargs={
                    &#34;attachments&#34;: attachments,
                    &#34;att_encoding_info&#34;: att_encoding_info,
                    &#34;atts_since&#34;: atts_since,
                    &#34;conflicts&#34;: conflicts,
                    &#34;deleted_conflicts&#34;: deleted_conflicts,
                    &#34;latest&#34;: latest,
                    &#34;local_seq&#34;: local_seq,
                    &#34;meta&#34;: meta,
                    &#34;open_revs&#34;: open_revs,
                    &#34;rev&#34;: rev,
                    &#34;revs&#34;: revs,
                    &#34;revs_info&#34;: revs_info
                }
            ).json())
        except (CouchDBError, requests.exceptions.RequestException) as error:
            if check is True:
                raise error
            return default_value

    def get_attachment(
            self,
            docid: str,
            attname: str,
            rev: str = None
    ) -&gt; AttachmentDocument:
        &#34;&#34;&#34;
        Get a document&#39;s attachment

        Parameters
        ----------
        docid : str
            The document&#39;s id.
        attname : str
            The attachment&#39;s name.
        rev : str
            A specific revision.

        Returns
        -------
        AttachmentDocument : A `couchdb3.document.AttachmentDocument` instance.
        &#34;&#34;&#34;
        response = self._get(
            f&#34;{docid}/{attname}&#34;,
            query_kwargs={&#34;rev&#34;: rev}
        )
        return AttachmentDocument(
            content=response.content,
            content_encoding=response.headers.get(&#34;content-encoding&#34;),
            content_length=response.headers.get(&#34;content-length&#34;),
            content_type=response.headers.get(&#34;content-type&#34;),
            digest=&#34;md5-&#34; + response.headers.get(&#34;content-md5&#34;),
        )

    def get_design(
            self,
            ddoc: str,
            **kwargs
    ) -&gt; Document:
        &#34;&#34;&#34;
        Get a design document.

        Parameters
        ----------
        ddoc: str
            The design document&#39;s name.
        kwargs
            Further `Database.get` parameters.

        Returns
        -------
        Document : A `couchdb3.document.Document` object containing the design document&#39;s content.
        &#34;&#34;&#34;
        return self.get(docid=f&#34;_design/{ddoc}&#34;, **kwargs)

    def purge(
            self,
            data: Dict
    ) -&gt; Dict:
        &#34;&#34;&#34;
        Purge permanently the given pairs of `(id,rev)`. When deleting a (revisions of a) document, the document is
        marked as `_deleted=true` as opposed to being completely purged. For more info, please refer to
        [the official documentation](https://docs.couchdb.org/en/main/api/database/misc.html#db-purge).

        Parameters
        ----------
        data : Dict
            A dictionary with document IDs as keys and list of revisions as values.

        Returns
        -------

        &#34;&#34;&#34;
        return self._post(
            resource=&#34;_purge&#34;,
            body=data
        ).json()

    def put_attachment(
            self,
            docid: str,
            attname: str,
            path: str = None,
            *,
            content: Any = None,
            rev: str = None,
    ) -&gt; Tuple[str, bool, str]:
        &#34;&#34;&#34;
        Uploads the supplied content as an attachment to the specified document.
        The appropriate content-type is generated using `couchdb3.utils.content_type_getter`.

        Parameters
        ----------
        docid : str
            The document&#39;s id.
        attname : str
            The attachment&#39;s name.
        path : str
            The path ot the local file to be uploaded.
            Precisely one of the arguments `path` or `content` must be supplied.
        content : str
            The content to be uploaded.
            Precisely one of the arguments `path` or `content` must be supplied.
        rev : str
            The document&#39;s current revision. Must be supplied for existing documents.

        Returns
        -------
        Tuple[str, bool, str] : A tuple consisting of the following elements.

          - the document&#39;s id ( `str`)
          - the operation status (`bool`)
          - the revision ( `str`)
        &#34;&#34;&#34;
        if (not content and not path) or (content and path):
            raise ValueError(&#34;Precisely one of the arguments \&#34;attdata\&#34; and  \&#34;attloc\&#34; must be provided.&#34;)
        content_type = content_type_getter(data=content, file_name=path)
        resource = f&#34;{docid}/{attname}&#34;
        query_kwargs = {&#34;rev&#34;: rev}
        req_kwargs = {
            &#34;headers&#34;: {
                &#34;content-type&#34;: content_type_getter(data=content, file_name=path)
            }
        }
        if path:
            with open(path, &#34;rb&#34;) as file:
                response = self._put(
                    resource=resource,
                    query_kwargs=query_kwargs,
                    data=file,
                    headers={
                        &#34;content-type&#34;: content_type
                    }
                )
        else:
            req_kwargs.update({&#34;body&#34;: content})
            response = self._put(
                resource=resource,
                query_kwargs=query_kwargs,
                body=content,
                headers={
                    &#34;content-type&#34;: content_type
                }
            )
        data = response.json()
        return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]

    def put_design(
            self,
            ddoc: str,
            *,
            rev: str = None,
            language: str = None,
            options: Dict = None,
            filters: Dict = None,
            updates: Dict = None,
            validate_doc_update: str = None,
            views: Dict = None,
            autoupdate: bool = None,
            **kwargs
    ) -&gt; Tuple[str, bool, str]:
        &#34;&#34;&#34;
        Create or update a named design document. For more info, please refer to
        [the official documentation](https://docs.couchdb.org/en/latest/api/ddoc/common.html#put--db-_design-ddoc).

        Parameters
        ----------
        ddoc : str
            The design document&#39;s name.
        rev : str
            The design document&#39;s revision in case of an update.
        language : str
            Defines [Query Server](https://docs.couchdb.org/en/latest/query-server/index.html#query-server) to process
            design document functions.
        options : Dict
            View’s default options.
        filters : Dict
            [Filter functions](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#filterfun) definition.
        updates : Dict
            [Update functions](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#updatefun) definition.
        validate_doc_update : str
            [Validate document update](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#vdufun) function source.
        views : Dict
            [View functions](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#viewfun) definition.
        autoupdate : bool
            Indicates whether to automatically build indexes defined in this design document.
        kwargs
        Further `Database.save` parameters.

        Returns
        -------
        Tuple[str, bool, str] : The document&#39;s id ( `str`), the operation status (`bool`) and the revision ( `str`).
        &#34;&#34;&#34;
        return self.save(
            doc={
                &#34;_id&#34;: f&#34;_design/{ddoc}&#34;,
                &#34;_rev&#34;: rev,
                &#34;language&#34;: language,
                &#34;options&#34;: options,
                &#34;filters&#34;: filters,
                &#34;updates&#34;: updates,
                &#34;validate_doc_update&#34;: validate_doc_update,
                &#34;views&#34;: views,
                &#34;autoupdate&#34;: autoupdate
            },
            **kwargs
        )

    def save(
            self,
            doc: Union[Dict, Document],
            batch: bool = None,
            new_edits: bool = None,
            path: str = None
    ) -&gt; Tuple[str, bool, str]:
        &#34;&#34;&#34;
        Create a new named document, or a new revision of the existing document.

        Parameters
        ----------
        doc : Union[Dict, couchdb3.document.Document]
            A dictionary or a `couchdb3.document.Document` instance containing a valid identifier (`doc[&#34;_id&#34;]`)
            as well as revision number (`doc[&#34;_rev&#34;]`) if need be.
        batch : bool
            Store document in batch mode. Default `None`.
        new_edits : bool
            Prevents insertion of a conflicting document. If false, a well-formed _rev must be included in the document.
            `new_edits=False` is used by the replicator to insert documents into the target database even if that leads
            to the creation of conflicts.
        path : str
            Database path, e.g `_design`. Default `None`.

        Returns
        -------
        Tuple[str, bool, str] : The document&#39;s id ( `str`), the operation status (`bool`) and the revision ( `str`).
        &#34;&#34;&#34;
        &#34;&#34;&#34;
        :return: 
        &#34;&#34;&#34;
        batch = &#34;ok&#34; if batch else None
        data = self._put(
            resource=&#34;%s/%s&#34; % (path, doc.get(&#34;_id&#34;)) if path else doc.get(&#34;_id&#34;),
            body=doc,
            query_kwargs={
                &#34;batch&#34;: &#34;ok&#34; if batch else None,
                &#34;new_edits&#34;: new_edits,
                &#34;rev&#34;: doc.get(&#34;_rev&#34;)
            }
        ).json()
        return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]

    def save_index(
            self,
            index: Dict,
            ddoc: str = None,
            name: str = None,
            index_type: str = &#34;json&#34;,
            partitioned: bool = None
    ) -&gt; Tuple[str, str, str]:
        &#34;&#34;&#34;
        Create a new index on a database.

        Parameters
        ----------
        index : Dict
            Dictionary describing the index to create.
        ddoc : str
            Name of the design document in which the index will be created. By default, each index will be created in
            its own design document. Indexes can be grouped into design documents for efficiency. However, a change to
            one index in a design document will invalidate all other indexes in the same document (similar to views).
        name : str
            Name of the index. If no name is provided, a name will be generated automatically.
        index_type : str
            Can be `json`  or `text`. Defaults to `json`. Geospatial indexes will be supported in the future. Optional
            Text indexes are supported via a third party library
        partitioned : bool
             Determines whether a JSON index is partitioned or global. The default value of `partitioned` is the
             `partitioned` property of the database. To create a global index on a partitioned database, specify `False`
             for the `&#34;partitioned&#34;` field. If you specify `True` for the `&#34;partitioned&#34;` field on an unpartitioned
             database, an error occurs.

        Returns
        -------
        Tuple[str, str, str]: A tuple consisting of the following elements.

          - result (`str`) – Flag to show whether the index was created or one already exists. Can be `&#34;created&#34;` or
          `&#34;exists&#34;`.
          - id (`str`) – Id of the design document the index was created in.
          - name (`str`) – Name of the index created.
        &#34;&#34;&#34;
        data = self._post(
            resource=&#34;_index&#34;,
            body={
                &#34;index&#34;: index,
                &#34;ddoc&#34;: ddoc,
                &#34;name&#34;: name,
                &#34;type&#34;: index_type,
                &#34;partitioned&#34;: partitioned
            }
        ).json()
        return data[&#34;result&#34;], data[&#34;id&#34;], data[&#34;name&#34;]

    def security(
            self
    ) -&gt; SecurityDocument:
        &#34;&#34;&#34;
        Returns the current security object from the specified database.

        Returns
        -------
        SecurityDocument : A `couchdb3.document.SecurityDocument` object.
        &#34;&#34;&#34;
        data = self._get(
            resource=&#34;_security&#34;
        ).json()
        return SecurityDocument(**data)

    def update_security(
            self,
            admins: Union[Dict, SecurityDocumentElement],
            members: Union[Dict, SecurityDocumentElement],
    ) -&gt; bool:
        &#34;&#34;&#34;
        Update database security.

        Parameters
        ----------
        admins : Union[Dict, SecurityDocumentElement]
            Object with two fields as `names` and `roles`. [See the official
            documentation](https://docs.couchdb.org/en/main/api/database/security.html#db-security) for more info.
        members : Union[Dict, SecurityDocumentElement]
            Object with two fields as `names` and `roles`. [See the official
            documentation](https://docs.couchdb.org/en/main/api/database/security.html#db-security) for more info.

        Returns
        -------
        bool :  Operation status.
        &#34;&#34;&#34;
        return self._put(
            resource=&#34;_security&#34;,
            body={
                &#34;admins&#34;: admins,
                &#34;members&#34;: members
            }
        ).json()[&#34;ok&#34;]

    def view(
            self,
            ddoc: str,
            view: str = None,
            *,
            conflicts: bool = None,
            descending: bool = None,
            endkey: str = None,
            endkey_docid: str = None,
            group: bool = None,
            group_level: int = None,
            include_docs: bool = None,
            attachments: bool = None,
            att_encoding_info: bool = None,
            inclusive_end: bool = None,
            key: str = None,
            keys: Iterable[str] = None,
            limit: int = None,
            reduce: bool = None,
            skip: int = None,
            sort: bool = None,
            stable: bool = None,
            startkey: str = None,
            startkey_docid: str = None,
            update: str = None,
            update_seq: bool = None
    ) -&gt; ViewResult:
        &#34;&#34;&#34;
        Executes the specified view function from the specified design documen, c.f [the official
        documentation](https://docs.couchdb.org/en/main/api/ddoc/views.html#db-design-design-doc-view-view-name).

        Parameters
        ----------
        ddoc : str
            The corresponding design document&#39;s id.
        view : str
            The view&#39;s id.
        conflicts : bool
            Include conflicts information in response. Ignored if `include_docs` isn’t `True`. Default is `None`.
        descending : bool
            Return the documents in descending order by key. Default is `None`.
        endkey : str
             Stop returning records when the specified key is reached. Default is `None`
        endkey_docid: str
            Stop returning records when the specified document ID is reached. Ignored if `endkey` is not set. Default
            is `None`.
        group: bool
            Group the results using the reduce function to a group or single row. Implies `reduce` is `true` and the
            maximum `group_level`. Default is `None`.
        group_level : int
             Specify the group level to be used. Implies group is true. Default is `None`.
        include_docs : bool
            Include the associated document with each row. Default is `None`.
        attachments : bool
            Include the Base64-encoded content of attachments in the documents that are included if `include_docs` is
            `True`. Ignored if `include_docs` isn’t `True`. Default is `None`.
        att_encoding_info : bool
            Include encoding information in attachment stubs if `include_docs` is `True` and the particular attachment
            is compressed. Ignored if `include_docs` isn’t `True`. Default is `False`.
        inclusive_end : bool
            Specifies whether the specified end key should be included in the result. Default is `None`.
        key : str
            Return only documents that match the specified key. Default is `None`.
        keys: Iterable[str]
            Return only documents where the key matches one of the keys specified in the argument. Default is `None`.
        limit : int
            Limit the number of the returned documents to the specified number.  Default is `None`.
        reduce : bool
            Use the reduction function. Default is `True` when a reduce function is defined. Default is `None`.
        skip : int
            Skip this number of records before starting to return the results. Default is `None`.
        sort : bool
            Sort returned rows (see Sorting Returned Rows). Setting this to `False` offers a performance boost. The
            `total_rows` and `offset` fields are not available when this is set to `False`. Default is `None`.
        stable : bool
            Whether or not the view results should be returned from a stable set of shards. Default is `None`.
        startkey : str
            Return records starting with the specified key. Default is `None`
        startkey_docid : str
            Return records starting with the specified document ID. Ignored if `startkey` is not set. Default is `None`
        update : str
            Whether or not the view in question should be updated prior to responding to the user. Supported values:

            - `true`
            - `false`
            - `lazy`

            Default is `None`.
        update_seq : bool
             Whether to include in the response an `update_seq` value indicating the sequence id of the database the
             view reflects. Default is `False`.

        Returns
        -------
        `view.ViewResult`
        &#34;&#34;&#34;
        return ViewResult(**self._get(
            resource=f&#34;_design/{ddoc}/_view/{view}&#34; if (ddoc and view) else ddoc,
            query_kwargs={
                &#34;conflicts&#34;: conflicts,
                &#34;descending&#34;: descending,
                &#34;endkey&#34;: endkey,
                &#34;endkey_docid&#34;: endkey_docid,
                &#34;group&#34;: group,
                &#34;group_level&#34;: group_level,
                &#34;include_docs&#34;: include_docs,
                &#34;attachments&#34;: attachments,
                &#34;att_encoding_info&#34;: att_encoding_info,
                &#34;inclusive_end&#34;: inclusive_end,
                &#34;key&#34;: key,
                &#34;keys&#34;: keys,
                &#34;limit&#34;: limit,
                &#34;reduce&#34;: reduce,
                &#34;skip&#34;: skip,
                &#34;sorted&#34;: sort,
                &#34;stable&#34;: stable,
                &#34;startkey&#34;: startkey,
                &#34;startkey_docid&#34;: startkey_docid,
                &#34;update&#34;: update,
                &#34;update_seq&#34;: update_seq
            }
        ).json())</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="couchdb3.base.Base" href="base.html#couchdb3.base.Base">Base</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="couchdb3.database.Database.all_docs"><code class="name flex">
<span>def <span class="ident">all_docs</span></span>(<span>self, partition: str = None, keys: Iterable[str] = None, **kwargs) ‑> <a title="couchdb3.view.ViewResult" href="view.html#couchdb3.view.ViewResult">ViewResult</a></span>
</code></dt>
<dd>
<div class="desc"><p>Executes the built-in _all_docs view, returning all of the documents in the database.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>partition</code></strong> :&ensp;<code>str</code></dt>
<dd>Filter using the partition's name (only valid for partitioned databases). Default is <code>None</code>.</dd>
<dt><strong><code>keys</code></strong> :&ensp;<code>Iterable[str]</code></dt>
<dd>Return only documents where the key matches one of the keys specified in the argument. Default is <code>None</code>.</dd>
<dt><strong><code>kwargs</code></strong></dt>
<dd>Further <code><a title="couchdb3.database.Database.view" href="#couchdb3.database.Database.view">Database.view()</a></code> parameters.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>ViewResult</code></dt>
<dd>&nbsp;</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def all_docs(
        self,
        partition: str = None,
        keys: Iterable[str] = None,
        **kwargs
) -&gt; ViewResult:
    &#34;&#34;&#34;
    Executes the built-in _all_docs view, returning all of the documents in the database.

    Parameters
    ----------
    partition : str
        Filter using the partition&#39;s name (only valid for partitioned databases). Default is `None`.
    keys : Iterable[str]
        Return only documents where the key matches one of the keys specified in the argument. Default is `None`.
    kwargs
        Further `couchdb3.database.Database.view` parameters.

    Returns
    -------
    ViewResult
    &#34;&#34;&#34;
    return self.view(
        f&#34;_partition/{partition}/_all_docs&#34; if partition else &#34;_all_docs&#34;,
        keys=keys,
        **kwargs
    )</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.bulk_docs"><code class="name flex">
<span>def <span class="ident">bulk_docs</span></span>(<span>self, docs: List[Union[Dict, <a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a>]], new_edits: bool = True) ‑> List[Dict]</span>
</code></dt>
<dd>
<div class="desc"><p>The bulk document API allows you to create and update multiple documents at the same time within a single
request. The basic operation is similar to creating or updating a single document, except that you batch the
document structure and information.</p>
<p>When creating new documents the document ID (<code>_id</code>) is optional.</p>
<p>For updating existing documents, you must provide the document ID, revision information (<code>_rev</code>), and new
document values.</p>
<p>In case of batch deleting documents all fields as document ID, revision information and deletion status
(<code>_deleted</code>) are required.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>docs</code></strong> :&ensp;<code>List[Union[Dict, Document]]</code></dt>
<dd>List of documents objects</dd>
<dt><strong><code>new_edits</code></strong> :&ensp;<code>bool</code></dt>
<dd>If <code>False</code>, prevents the database from assigning them new revision IDs. Default <code>True</code>.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>List[Dict] : A list of dictionaries containing the following keys.</p>
<ul>
<li><code>id</code> the document's id</li>
<li><code>ok</code> operation status</li>
<li><code>rev</code> the document's revision</li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def bulk_docs(
        self,
        docs: List[Union[Dict, Document]],
        new_edits: bool = True
) -&gt; List[Dict]:
    &#34;&#34;&#34;
    The bulk document API allows you to create and update multiple documents at the same time within a single
    request. The basic operation is similar to creating or updating a single document, except that you batch the
    document structure and information.

    When creating new documents the document ID (`_id`) is optional.

    For updating existing documents, you must provide the document ID, revision information (`_rev`), and new
    document values.

    In case of batch deleting documents all fields as document ID, revision information and deletion status
    (`_deleted`) are required.

    Parameters
    ----------
    docs : List[Union[Dict, Document]]
         List of documents objects
    new_edits : bool
        If `False`, prevents the database from assigning them new revision IDs. Default `True`.

    Returns
    -------
    List[Dict] : A list of dictionaries containing the following keys.

      - `id` the document&#39;s id
      - `ok` operation status
      - `rev` the document&#39;s revision
    &#34;&#34;&#34;
    return self._post(
        resource=&#34;_bulk_docs&#34;,
        body={
            &#34;docs&#34;: docs,
            &#34;new_edits&#34;: new_edits
        }
    ).json()</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.bulk_get"><code class="name flex">
<span>def <span class="ident">bulk_get</span></span>(<span>self, docs: List[Union[Dict, <a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a>]], revs: bool = False) ‑> List[Dict]</span>
</code></dt>
<dd>
<div class="desc"><p>This method can be called to query several documents in bulk. It is well suited for fetching a specific
revision of documents, as replicators do for example, or for getting revision history.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>docs</code></strong> :&ensp;<code>List[Union[Dict, Document]]</code></dt>
<dd>List of document objects, with <code>id</code>, and optionally <code>rev</code> and <code>atts_since</code>.</dd>
<dt><strong><code>revs</code></strong> :&ensp;<code>bool</code></dt>
<dd>Give the revisions history.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>List[Dict] : An array of results for each requested document/rev pair.</p>
<ul>
<li><code>id</code> key lists the requested
document ID,</li>
<li><code>docs</code> contains a single-item array of objects, each of which has either an <code>error</code> key and value describing
the error, or <code>ok</code> key and associated value of the requested document, with the additional _revisions property
that lists the parent revisions if <code>revs=true</code>.</li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def bulk_get(
        self,
        docs: List[Union[Dict, Document]],
        revs: bool = False
) -&gt; List[Dict]:
    &#34;&#34;&#34;
    This method can be called to query several documents in bulk. It is well suited for fetching a specific
    revision of documents, as replicators do for example, or for getting revision history.

    Parameters
    ----------
    docs : List[Union[Dict, Document]]
        List of document objects, with `id`, and optionally `rev` and `atts_since`.
    revs : bool
         Give the revisions history.

    Returns
    -------
    List[Dict] : An array of results for each requested document/rev pair.

      - `id` key lists the requested
      document ID,
      - `docs` contains a single-item array of objects, each of which has either an `error` key and value describing
      the error, or `ok` key and associated value of the requested document, with the additional _revisions property
      that lists the parent revisions if `revs=true`.
    &#34;&#34;&#34;
    return self._post(
        resource=&#34;_bulk_get&#34;,
        body={
            &#34;docs&#34;: [extract_document_id_and_rev(_) for _ in docs]
        },
        query_kwargs={
            &#34;revs&#34;: revs
        }
    ).json().get(&#34;results&#34;, [])</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.compact"><code class="name flex">
<span>def <span class="ident">compact</span></span>(<span>self, ddoc: str = None) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Request compaction of the database. For more info, please refer to
<a href="https://docs.couchdb.org/en/main/api/database/compact.html#db-compact">the official documentation</a>.</p>
<p>If the <code>ddoc</code> parameter is provided, it will compacts the view indexes associated with the specified design
document.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>ddoc</code></strong> :&ensp;<code>str</code></dt>
<dd>A design document name.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>bool: <code>True</code> upon compaction request successfully sent.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def compact(
        self,
        ddoc: str = None
) -&gt; bool:
    &#34;&#34;&#34;
    Request compaction of the database. For more info, please refer to
    [the official documentation](https://docs.couchdb.org/en/main/api/database/compact.html#db-compact).

    If the `ddoc` parameter is provided, it will compacts the view indexes associated with the specified design
    document.

    Parameters
    ----------
    ddoc : str
        A design document name.

    Returns
    -------
    bool: `True` upon compaction request successfully sent.
    &#34;&#34;&#34;
    resource = &#34;_compact&#34;
    if ddoc:
        resource += f&#34;/{ddoc}&#34;
    return self._post(
        resource=resource
    ).json().get(&#34;ok&#34;)</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.copy"><code class="name flex">
<span>def <span class="ident">copy</span></span>(<span>self, docid: str, destid: str, rev: str = None, destrev: str = None) ‑> Tuple[str, bool, str]</span>
</code></dt>
<dd>
<div class="desc"><p>Copy an existing document to a new or existing document. Copying a document is only possible within the same
database. For more info, please refer to
<a href="https://docs.couchdb.org/en/main/api/document/common.html#copy--db-docid">the official documentation</a>.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>docid</code></strong> :&ensp;<code>str</code></dt>
<dd>The ID of the document to copy.</dd>
<dt><strong><code>destid</code></strong> :&ensp;<code>str</code></dt>
<dd>The target document's ID.</dd>
<dt><strong><code>rev</code></strong> :&ensp;<code>str</code></dt>
<dd>A specific revision of the document to copy.</dd>
<dt><strong><code>destrev</code></strong> :&ensp;<code>str</code></dt>
<dd>If the target document already exists, its current revision.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>Tuple[str, bool, str] : A tuple consisting of the id, success message &amp; revision.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def copy(
        self,
        docid: str,
        destid: str,
        rev: str = None,
        destrev: str = None
) -&gt; Tuple[str, bool, str]:
    &#34;&#34;&#34;
    Copy an existing document to a new or existing document. Copying a document is only possible within the same
    database. For more info, please refer to
    [the official documentation](https://docs.couchdb.org/en/main/api/document/common.html#copy--db-docid).

    Parameters
    ----------
    docid : str
        The ID of the document to copy.
    destid : str
        The target document&#39;s ID.
    rev : str
        A specific revision of the document to copy.
    destrev : str
        If the target document already exists, its current revision.

    Returns
    -------
    Tuple[str, bool, str] : A tuple consisting of the id, success message &amp; revision.
    &#34;&#34;&#34;
    destination = destid
    if destrev:
        destination += f&#34;?rev={destrev}&#34;
    data = self._request(
        method=&#34;COPY&#34;,
        resource=docid,
        headers={
            &#34;Destination&#34;: destination,
        },
        query_kwargs={
            &#34;rev&#34;: rev
        }
    ).json()
    return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.create"><code class="name flex">
<span>def <span class="ident">create</span></span>(<span>self, doc: Union[Dict, <a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a>], *, batch: bool = None) ‑> Tuple[str, bool, str]</span>
</code></dt>
<dd>
<div class="desc"><p>Create a new document.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>doc</code></strong> :&ensp;<code>Union[Dict, <a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a>]</code></dt>
<dd>A dictionary or a <code><a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a></code> instance to be created.</dd>
<dt><strong><code>batch</code></strong> :&ensp;<code>bool</code></dt>
<dd>Stores document in batch mode. Default <code>None</code>.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>Tuple[str, bool, str] : A tuple consisting of the id, success message &amp; revision.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def create(
        self,
        doc: Union[Dict, Document],
        *,
        batch: bool = None
) -&gt; Tuple[str, bool, str]:
    &#34;&#34;&#34;
    Create a new document.

    Parameters
    ----------
    doc : Union[Dict, couchdb3.document.Document]
        A dictionary or a `couchdb3.document.Document` instance to be created.
    batch : bool
        Stores document in batch mode. Default `None`.

    Returns
    -------
    Tuple[str, bool, str] : A tuple consisting of the id, success message &amp; revision.
    &#34;&#34;&#34;
    data = self._post(
        body=doc,
        query_kwargs={
            &#34;batch&#34;: &#34;ok&#34; if batch is True else None
        }
    ).json()
    return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.delete"><code class="name flex">
<span>def <span class="ident">delete</span></span>(<span>self, docid: str, rev: str, *, batch: bool = None) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Delete a document.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>docid</code></strong> :&ensp;<code>str</code></dt>
<dd>The document's id.</dd>
<dt><strong><code>rev</code></strong> :&ensp;<code>str</code></dt>
<dd>The document's current revision. If not known, one can use <code><a title="couchdb3.database.Database.rev" href="base.html#couchdb3.base.Base.rev">Base.rev()</a></code> with the given <code>docid</code>.</dd>
<dt><strong><code>batch</code></strong> :&ensp;<code>bool</code></dt>
<dd>Stores document in batch mode. Default <code>None</code>.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>bool : <code>True</code> upon successful deletion.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete(
        self,
        docid: str,
        rev: str,
        *,
        batch: bool = None
) -&gt; bool:
    &#34;&#34;&#34;
    Delete a document.

    Parameters
    ----------
    docid : str
        The document&#39;s id.
    rev : str
        The document&#39;s current revision. If not known, one can use `Database.rev` with the given `docid`.
    batch : bool
        Stores document in batch mode. Default `None`.

    Returns
    -------
    bool : `True` upon successful deletion.
    &#34;&#34;&#34;
    self._delete(
        resource=docid,
        query_kwargs={
            &#34;rev&#34;: rev,
            &#34;batch&#34;: &#34;ok&#34; if batch is True else None
        }
    )
    return True</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.delete_attachment"><code class="name flex">
<span>def <span class="ident">delete_attachment</span></span>(<span>self, docid: str, attname: str, rev: str, *, batch: bool = False) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Delete an attachment.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>docid</code></strong> :&ensp;<code>str</code></dt>
<dd>The document's id.</dd>
<dt><strong><code>attname</code></strong> :&ensp;<code>str</code></dt>
<dd>The attachment's name.</dd>
<dt><strong><code>rev</code></strong> :&ensp;<code>str</code></dt>
<dd>The document's current revision. If not known, one can use <code><a title="couchdb3.database.Database.rev" href="base.html#couchdb3.base.Base.rev">Base.rev()</a></code> with the given <code>docid</code>.</dd>
<dt><strong><code>batch</code></strong> :&ensp;<code>bool</code></dt>
<dd>Stores document in batch mode. Default <code>None</code>.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>bool : <code>True</code> upon successful deletion.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete_attachment(
        self,
        docid: str,
        attname: str,
        rev: str,
        *,
        batch: bool = False
) -&gt; bool:
    &#34;&#34;&#34;
    Delete an attachment.

    Parameters
    ----------
    docid : str
        The document&#39;s id.
    attname : str
        The attachment&#39;s name.
    rev : str
        The document&#39;s current revision. If not known, one can use `Database.rev` with the given `docid`.
    batch : bool
        Stores document in batch mode. Default `None`.

    Returns
    -------
    bool : `True` upon successful deletion.
    &#34;&#34;&#34;
    self._delete(
        resource=f&#34;{docid}/{attname}&#34;,
        query_kwargs={
            &#34;rev&#34;: rev,
            &#34;batch&#34;: &#34;ok&#34; if batch is True else None
        }
    )
    return True</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.explain"><code class="name flex">
<span>def <span class="ident">explain</span></span>(<span>self, selector: Dict, limit: int = 25, skip: int = 0, sort: List[Dict] = None, fields: List[str] = None, use_index: Union[str, List[str]] = None, conflicts: bool = False, r: int = 1, bookmark: str = None, update: bool = True, stable: bool = None, execution_stats: bool = False) ‑> Dict</span>
</code></dt>
<dd>
<div class="desc"><p>Shows which index is being used by the query. Parameters are the same as <code><a title="couchdb3.database.Database.find" href="#couchdb3.database.Database.find">Database.find()</a></code>.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>selector</code></strong> :&ensp;<code>Dict</code></dt>
<dd>JSON object describing criteria used to select documents. More information provided in CouchDB's section on
<a href="https://docs.couchdb.org/en/main/api/database/find.html#find-selectors">selector syntax</a>.</dd>
<dt><strong><code>limit</code></strong> :&ensp;<code>int</code></dt>
<dd>Maximum number of results returned. Default is <code>25</code>.</dd>
<dt><strong><code>skip</code></strong> :&ensp;<code>int</code></dt>
<dd>Skip the first <code>n</code> results, where <code>n</code> is the value specified. Default is <code>0</code>.</dd>
<dt><strong><code>sort</code></strong> :&ensp;<code>Dict</code></dt>
<dd>JSON array following CouchDB's [sort syntax]
(<a href="https://docs.couchdb.org/en/main/api/database/find.html#find-sort">https://docs.couchdb.org/en/main/api/database/find.html#find-sort</a>). Default is <code>None</code>.</dd>
<dt><strong><code>fields</code></strong> :&ensp;<code>List[str]</code></dt>
<dd>Dictionary specifying which fields of each object should be returned. If it is omitted, the entire object
is returned. More information provided in CouchDB's [section on filtering fields]
(<a href="https://docs.couchdb.org/en/main/api/database/find.html#find-filter">https://docs.couchdb.org/en/main/api/database/find.html#find-filter</a>).</dd>
<dt><strong><code>use_index</code></strong> :&ensp;<code>Union[str, List[str]]</code></dt>
<dd>Instruct a query to use a specific index. Specified either as <code>"&lt;design_document&gt;"</code> or
<code>["&lt;design_document&gt;", "&lt;index_name&gt;"]</code>. Default is <code>None</code>.</dd>
<dt><strong><code>conflicts</code></strong> :&ensp;<code>bool</code></dt>
<dd>Include conflicted documents if <code>True</code>. Intended use is to easily find conflicted documents,
without an index or view. Default is <code>False</code>.</dd>
<dt><strong><code>r</code></strong> :&ensp;<code>int</code></dt>
<dd>Read quorum needed for the result. This defaults to 1, in which case the document found in the index is
returned. If set to a higher value, each document is read from at least that many replicas before it is
returned in the results. This is likely to take more time than using only the document stored locally with
the index. Default is <code>None</code>.</dd>
<dt><strong><code>bookmark</code></strong> :&ensp;<code>str</code></dt>
<dd>A string that enables you to specify which page of results you require. Used for paging through result
sets. Every query returns an opaque string under the <code>bookmark</code> key that can then be passed back in a query
to get the next page of results. If any part of the selector query changes between requests, the results
are undefined. Default is <code>None</code>.</dd>
<dt><strong><code>update</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether to update the index prior to returning the result. Default is <code>True</code>.</dd>
<dt><strong><code>stable</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether or not the view results should be returned from a “stable” set of shards. Default is <code>None</code>.</dd>
<dt><strong><code>execution_stats</code></strong> :&ensp;<code>bool</code></dt>
<dd>Include <a href="https://docs.couchdb.org/en/main/api/database/find.html#find-statistics">execution statistics</a> in
the query response. Default is <code>False</code>.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>Dict: A dictionary containing the following keys.</p>
<ul>
<li>dbname (<code>str</code>) – Name of database</li>
<li>index (<code>Dict</code>) – Index used to fulfill the query</li>
<li>selector (<code>Dict</code>) – Query selector used</li>
<li>opts (<code>Dict</code>) – Query options used</li>
<li>limit (<code>int</code>) – Limit parameter used</li>
<li>skip (<code>int</code>) – Skip parameter used</li>
<li>fields (<code>List</code>) – Fields to be returned by the query</li>
<li>range (<code>Dict</code>) – Range parameters passed to the underlying view</li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def explain(
        self,
        selector: Dict,
        limit: int = 25,
        skip: int = 0,
        sort: List[Dict] = None,
        fields: List[str] = None,
        use_index: Union[str, List[str]] = None,
        conflicts: bool = False,
        r: int = 1,
        bookmark: str = None,
        update: bool = True,
        stable: bool = None,
        execution_stats: bool = False
) -&gt; Dict:
    &#34;&#34;&#34;
    Shows which index is being used by the query. Parameters are the same as `Database.find`.

    Parameters
    ----------
    selector : Dict
        JSON object describing criteria used to select documents. More information provided in CouchDB&#39;s section on
        [selector syntax](https://docs.couchdb.org/en/main/api/database/find.html#find-selectors).
    limit : int
        Maximum number of results returned. Default is `25`.
    skip : int
        Skip the first `n` results, where `n` is the value specified. Default is `0`.
    sort : Dict
         JSON array following CouchDB&#39;s [sort syntax]
         (https://docs.couchdb.org/en/main/api/database/find.html#find-sort). Default is `None`.
    fields : List[str]
        Dictionary specifying which fields of each object should be returned. If it is omitted, the entire object
        is returned. More information provided in CouchDB&#39;s [section on filtering fields]
        (https://docs.couchdb.org/en/main/api/database/find.html#find-filter).
    use_index : Union[str, List[str]]
        Instruct a query to use a specific index. Specified either as `&#34;&lt;design_document&gt;&#34;` or
        `[&#34;&lt;design_document&gt;&#34;, &#34;&lt;index_name&gt;&#34;]`. Default is `None`.
    conflicts : bool
        Include conflicted documents if `True`. Intended use is to easily find conflicted documents,
        without an index or view. Default is `False`.
    r : int
        Read quorum needed for the result. This defaults to 1, in which case the document found in the index is
        returned. If set to a higher value, each document is read from at least that many replicas before it is
        returned in the results. This is likely to take more time than using only the document stored locally with
        the index. Default is `None`.
    bookmark : str
        A string that enables you to specify which page of results you require. Used for paging through result
        sets. Every query returns an opaque string under the `bookmark` key that can then be passed back in a query
        to get the next page of results. If any part of the selector query changes between requests, the results
        are undefined. Default is `None`.
    update: bool
        Whether to update the index prior to returning the result. Default is `True`.
    stable : bool
        Whether or not the view results should be returned from a “stable” set of shards. Default is `None`.
    execution_stats : bool
        Include [execution statistics](https://docs.couchdb.org/en/main/api/database/find.html#find-statistics) in
        the query response. Default is `False`.

    Returns
    -------
    Dict: A dictionary containing the following keys.

      - dbname (`str`) – Name of database
      - index (`Dict`) – Index used to fulfill the query
      - selector (`Dict`) – Query selector used
      - opts (`Dict`) – Query options used
      - limit (`int`) – Limit parameter used
      - skip (`int`) – Skip parameter used
      - fields (`List`) – Fields to be returned by the query
      - range (`Dict`) – Range parameters passed to the underlying view

    &#34;&#34;&#34;
    return self._post(
        resource=&#34;_explain&#34;,
        body={
            &#34;selector&#34;: selector,
            &#34;limit&#34;: limit,
            &#34;skip&#34;: skip,
            &#34;sort&#34;: sort,
            &#34;fields&#34;: fields,
            &#34;use_index&#34;: use_index,
            &#34;conflicts&#34;: conflicts,
            &#34;r&#34;: r,
            &#34;bookmark&#34;: bookmark,
            &#34;update&#34;: update,
            &#34;stable&#34;: stable,
            &#34;execution_stats&#34;: execution_stats,
        }
    ).json()</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.find"><code class="name flex">
<span>def <span class="ident">find</span></span>(<span>self, selector: Dict, limit: int = 25, skip: int = 0, sort: List[Dict] = None, fields: List[str] = None, use_index: Union[str, List[str]] = None, conflicts: bool = False, r: int = 1, bookmark: str = None, update: bool = True, stable: bool = None, execution_stats: bool = False) ‑> Dict</span>
</code></dt>
<dd>
<div class="desc"><p>Find documents using a declarative JSON querying syntax.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>selector</code></strong> :&ensp;<code>Dict</code></dt>
<dd>JSON object describing criteria used to select documents. More information provided in CouchDB's section on
<a href="https://docs.couchdb.org/en/main/api/database/find.html#find-selectors">selector syntax</a>.</dd>
<dt><strong><code>limit</code></strong> :&ensp;<code>int</code></dt>
<dd>Maximum number of results returned. Default is <code>25</code>.</dd>
<dt><strong><code>skip</code></strong> :&ensp;<code>int</code></dt>
<dd>Skip the first <code>n</code> results, where <code>n</code> is the value specified. Default is <code>0</code>.</dd>
<dt><strong><code>sort</code></strong> :&ensp;<code>Dict</code></dt>
<dd>JSON array following CouchDB's [sort syntax]
(<a href="https://docs.couchdb.org/en/main/api/database/find.html#find-sort">https://docs.couchdb.org/en/main/api/database/find.html#find-sort</a>). Default is <code>None</code>.</dd>
<dt><strong><code>fields</code></strong> :&ensp;<code>List[str]</code></dt>
<dd>Dictionary specifying which fields of each object should be returned. If it is omitted, the entire object
is returned. More information provided in CouchDB's [section on filtering fields]
(<a href="https://docs.couchdb.org/en/main/api/database/find.html#find-filter">https://docs.couchdb.org/en/main/api/database/find.html#find-filter</a>).</dd>
<dt><strong><code>use_index</code></strong> :&ensp;<code>Union[str, List[str]]</code></dt>
<dd>Instruct a query to use a specific index. Specified either as <code>"&lt;design_document&gt;"</code> or
<code>["&lt;design_document&gt;", "&lt;index_name&gt;"]</code>. Default is <code>None</code>.</dd>
<dt><strong><code>conflicts</code></strong> :&ensp;<code>bool</code></dt>
<dd>Include conflicted documents if <code>True</code>. Intended use is to easily find conflicted documents,
without an index or view. Default is <code>False</code>.</dd>
<dt><strong><code>r</code></strong> :&ensp;<code>int</code></dt>
<dd>Read quorum needed for the result. This defaults to 1, in which case the document found in the index is
returned. If set to a higher value, each document is read from at least that many replicas before it is
returned in the results. This is likely to take more time than using only the document stored locally with
the index. Default is <code>None</code>.</dd>
<dt><strong><code>bookmark</code></strong> :&ensp;<code>str</code></dt>
<dd>A string that enables you to specify which page of results you require. Used for paging through result
sets. Every query returns an opaque string under the <code>bookmark</code> key that can then be passed back in a query
to get the next page of results. If any part of the selector query changes between requests, the results
are undefined. Default is <code>None</code>.</dd>
<dt><strong><code>update</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether to update the index prior to returning the result. Default is <code>True</code>.</dd>
<dt><strong><code>stable</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether or not the view results should be returned from a “stable” set of shards. Default is <code>None</code>.</dd>
<dt><strong><code>execution_stats</code></strong> :&ensp;<code>bool</code></dt>
<dd>Include <a href="https://docs.couchdb.org/en/main/api/database/find.html#find-statistics">execution statistics</a> in
the query response. Default is <code>False</code>.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>Dict: A dictionary containing the following keys.</p>
<ul>
<li><code>bookmark</code></li>
<li><code>docs</code></li>
<li><code>warning</code></li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def find(
        self,
        selector: Dict,
        limit: int = 25,
        skip: int = 0,
        sort: List[Dict] = None,
        fields: List[str] = None,
        use_index: Union[str, List[str]] = None,
        conflicts: bool = False,
        r: int = 1,
        bookmark: str = None,
        update: bool = True,
        stable: bool = None,
        execution_stats: bool = False
) -&gt; Dict:
    &#34;&#34;&#34;
    Find documents using a declarative JSON querying syntax.

    Parameters
    ----------
    selector : Dict
        JSON object describing criteria used to select documents. More information provided in CouchDB&#39;s section on
        [selector syntax](https://docs.couchdb.org/en/main/api/database/find.html#find-selectors).
    limit : int
        Maximum number of results returned. Default is `25`.
    skip : int
        Skip the first `n` results, where `n` is the value specified. Default is `0`.
    sort : Dict
         JSON array following CouchDB&#39;s [sort syntax]
         (https://docs.couchdb.org/en/main/api/database/find.html#find-sort). Default is `None`.
    fields : List[str]
        Dictionary specifying which fields of each object should be returned. If it is omitted, the entire object
        is returned. More information provided in CouchDB&#39;s [section on filtering fields]
        (https://docs.couchdb.org/en/main/api/database/find.html#find-filter).
    use_index : Union[str, List[str]]
        Instruct a query to use a specific index. Specified either as `&#34;&lt;design_document&gt;&#34;` or
        `[&#34;&lt;design_document&gt;&#34;, &#34;&lt;index_name&gt;&#34;]`. Default is `None`.
    conflicts : bool
        Include conflicted documents if `True`. Intended use is to easily find conflicted documents,
        without an index or view. Default is `False`.
    r : int
        Read quorum needed for the result. This defaults to 1, in which case the document found in the index is
        returned. If set to a higher value, each document is read from at least that many replicas before it is
        returned in the results. This is likely to take more time than using only the document stored locally with
        the index. Default is `None`.
    bookmark : str
        A string that enables you to specify which page of results you require. Used for paging through result
        sets. Every query returns an opaque string under the `bookmark` key that can then be passed back in a query
        to get the next page of results. If any part of the selector query changes between requests, the results
        are undefined. Default is `None`.
    update: bool
        Whether to update the index prior to returning the result. Default is `True`.
    stable : bool
        Whether or not the view results should be returned from a “stable” set of shards. Default is `None`.
    execution_stats : bool
        Include [execution statistics](https://docs.couchdb.org/en/main/api/database/find.html#find-statistics) in
        the query response. Default is `False`.

    Returns
    -------
    Dict: A dictionary containing the following keys.

      - `bookmark`
      - `docs`
      - `warning`
    &#34;&#34;&#34;
    return self._post(
        resource=&#34;_find&#34;,
        body={
            &#34;selector&#34;: selector,
            &#34;limit&#34;: limit,
            &#34;skip&#34;: skip,
            &#34;sort&#34;: sort,
            &#34;fields&#34;: fields,
            &#34;use_index&#34;: use_index,
            &#34;conflicts&#34;: conflicts,
            &#34;r&#34;: r,
            &#34;bookmark&#34;: bookmark,
            &#34;update&#34;: update,
            &#34;stable&#34;: stable,
            &#34;execution_stats&#34;: execution_stats,
        }
    ).json()</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.get"><code class="name flex">
<span>def <span class="ident">get</span></span>(<span>self, docid: str, *, attachments: bool = None, att_encoding_info: bool = None, atts_since: Iterable[str] = None, conflicts: bool = None, deleted_conflicts: bool = None, latest: bool = None, local_seq: bool = None, meta: bool = None, open_revs: Iterable[str] = None, rev: str = None, revs: bool = None, revs_info: bool = None, check: bool = False, default_value: Any = None) ‑> Union[<a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a>, Any]</span>
</code></dt>
<dd>
<div class="desc"><p>Get a document by id.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>docid</code></strong> :&ensp;<code>str</code></dt>
<dd>The document's id.</dd>
<dt><strong><code>attachments</code></strong> :&ensp;<code>bool</code></dt>
<dd>Includes attachments bodies in response. Default <code>None</code>.</dd>
<dt><strong><code>att_encoding_info</code></strong> :&ensp;<code>bool</code></dt>
<dd>Includes encoding information in attachment stubs if the particular attachment is compressed.
Default <code>None</code>.</dd>
<dt><strong><code>atts_since</code></strong> :&ensp;<code>Iterable[str]</code></dt>
<dd>Includes attachments only since specified revisions. Doesn’t includes attachments for specified revisions.
Default <code>None</code>.</dd>
<dt><strong><code>conflicts</code></strong> :&ensp;<code>bool</code></dt>
<dd>Includes information about conflicts in document. Default <code>None</code>.</dd>
<dt><strong><code>deleted_conflicts</code></strong> :&ensp;<code>bool</code></dt>
<dd>Includes information about deleted conflicted revisions. Default <code>None</code>.</dd>
<dt><strong><code>latest</code></strong> :&ensp;<code>bool</code></dt>
<dd>Forces retrieving latest “leaf” revision, no matter what rev was requested. Default <code>None</code>.</dd>
<dt><strong><code>local_seq</code></strong> :&ensp;<code>bool</code></dt>
<dd>Includes last update sequence for the document. Default <code>None</code>.</dd>
<dt><strong><code>meta</code></strong> :&ensp;<code>bool</code></dt>
<dd>Acts same as specifying all conflicts, deleted_conflicts and revs_info query parameters. Default <code>None</code>.</dd>
<dt><strong><code>open_revs</code></strong> :&ensp;<code>Iterable[str]</code></dt>
<dd>Retrieves documents of specified leaf revisions. Additionally, it accepts value as all to return all leaf
revisions. Default <code>None</code>.</dd>
<dt><strong><code>rev</code></strong> :&ensp;<code>str</code></dt>
<dd>Retrieves document of specified revision. Default <code>None</code>.</dd>
<dt><strong><code>revs</code></strong> :&ensp;<code>bool</code></dt>
<dd>Includes list of all known document revisions. Default <code>None</code>.</dd>
<dt><strong><code>revs_info</code></strong> :&ensp;<code>bool</code></dt>
<dd>Includes detailed information for all known document revisions. Default <code>None</code>.</dd>
<dt><strong><code>check</code></strong> :&ensp;<code>bool</code></dt>
<dd>If <code>True</code>, raise an exception if <code>docid</code> cannot be found in the database. Default <code>False</code>.</dd>
<dt><strong><code>default_value</code></strong> :&ensp;<code>Any</code></dt>
<dd>The default value to return if <code>check=False</code> and the <code>docid</code> is not in the database. Default <code>None</code>.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p><code><a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a></code></p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get(
        self,
        docid: str,
        *,
        attachments: bool = None,
        att_encoding_info: bool = None,
        atts_since: Iterable[str] = None,
        conflicts: bool = None,
        deleted_conflicts: bool = None,
        latest: bool = None,
        local_seq: bool = None,
        meta: bool = None,
        open_revs: Iterable[str] = None,
        rev: str = None,
        revs: bool = None,
        revs_info: bool = None,
        check: bool = False,
        default_value: Any = None,
) -&gt; Union[Document, Any]:
    &#34;&#34;&#34;
    Get a document by id.

    Parameters
    ----------
    docid : str
        The document&#39;s id.
    attachments : bool
        Includes attachments bodies in response. Default `None`.
    att_encoding_info : bool
        Includes encoding information in attachment stubs if the particular attachment is compressed.
        Default `None`.
    atts_since : Iterable[str]
        Includes attachments only since specified revisions. Doesn’t includes attachments for specified revisions.
        Default `None`.
    conflicts : bool
        Includes information about conflicts in document. Default `None`.
    deleted_conflicts : bool
        Includes information about deleted conflicted revisions. Default `None`.
    latest : bool
        Forces retrieving latest “leaf” revision, no matter what rev was requested. Default `None`.
    local_seq : bool
        Includes last update sequence for the document. Default `None`.
    meta : bool
        Acts same as specifying all conflicts, deleted_conflicts and revs_info query parameters. Default `None`.
    open_revs : Iterable[str]
        Retrieves documents of specified leaf revisions. Additionally, it accepts value as all to return all leaf
        revisions. Default `None`.
    rev : str
        Retrieves document of specified revision. Default `None`.
    revs : bool
        Includes list of all known document revisions. Default `None`.
    revs_info : bool
        Includes detailed information for all known document revisions. Default `None`.
    check : bool
        If `True`, raise an exception if `docid` cannot be found in the database. Default `False`.
    default_value : Any
        The default value to return if `check=False` and the `docid` is not in the database. Default `None`.

    Returns
    -------
    `couchdb3.document.Document`
    &#34;&#34;&#34;
    try:
        return Document(**self._get(
            resource=docid,
            query_kwargs={
                &#34;attachments&#34;: attachments,
                &#34;att_encoding_info&#34;: att_encoding_info,
                &#34;atts_since&#34;: atts_since,
                &#34;conflicts&#34;: conflicts,
                &#34;deleted_conflicts&#34;: deleted_conflicts,
                &#34;latest&#34;: latest,
                &#34;local_seq&#34;: local_seq,
                &#34;meta&#34;: meta,
                &#34;open_revs&#34;: open_revs,
                &#34;rev&#34;: rev,
                &#34;revs&#34;: revs,
                &#34;revs_info&#34;: revs_info
            }
        ).json())
    except (CouchDBError, requests.exceptions.RequestException) as error:
        if check is True:
            raise error
        return default_value</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.get_attachment"><code class="name flex">
<span>def <span class="ident">get_attachment</span></span>(<span>self, docid: str, attname: str, rev: str = None) ‑> <a title="couchdb3.document.AttachmentDocument" href="document.html#couchdb3.document.AttachmentDocument">AttachmentDocument</a></span>
</code></dt>
<dd>
<div class="desc"><p>Get a document's attachment</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>docid</code></strong> :&ensp;<code>str</code></dt>
<dd>The document's id.</dd>
<dt><strong><code>attname</code></strong> :&ensp;<code>str</code></dt>
<dd>The attachment's name.</dd>
<dt><strong><code>rev</code></strong> :&ensp;<code>str</code></dt>
<dd>A specific revision.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>AttachmentDocument : A <code><a title="couchdb3.document.AttachmentDocument" href="document.html#couchdb3.document.AttachmentDocument">AttachmentDocument</a></code> instance.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_attachment(
        self,
        docid: str,
        attname: str,
        rev: str = None
) -&gt; AttachmentDocument:
    &#34;&#34;&#34;
    Get a document&#39;s attachment

    Parameters
    ----------
    docid : str
        The document&#39;s id.
    attname : str
        The attachment&#39;s name.
    rev : str
        A specific revision.

    Returns
    -------
    AttachmentDocument : A `couchdb3.document.AttachmentDocument` instance.
    &#34;&#34;&#34;
    response = self._get(
        f&#34;{docid}/{attname}&#34;,
        query_kwargs={&#34;rev&#34;: rev}
    )
    return AttachmentDocument(
        content=response.content,
        content_encoding=response.headers.get(&#34;content-encoding&#34;),
        content_length=response.headers.get(&#34;content-length&#34;),
        content_type=response.headers.get(&#34;content-type&#34;),
        digest=&#34;md5-&#34; + response.headers.get(&#34;content-md5&#34;),
    )</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.get_design"><code class="name flex">
<span>def <span class="ident">get_design</span></span>(<span>self, ddoc: str, **kwargs) ‑> <a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a></span>
</code></dt>
<dd>
<div class="desc"><p>Get a design document.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>ddoc</code></strong> :&ensp;<code>str</code></dt>
<dd>The design document's name.</dd>
<dt><strong><code>kwargs</code></strong></dt>
<dd>Further <code><a title="couchdb3.database.Database.get" href="#couchdb3.database.Database.get">Database.get()</a></code> parameters.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>Document : A <code><a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a></code> object containing the design document's content.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_design(
        self,
        ddoc: str,
        **kwargs
) -&gt; Document:
    &#34;&#34;&#34;
    Get a design document.

    Parameters
    ----------
    ddoc: str
        The design document&#39;s name.
    kwargs
        Further `Database.get` parameters.

    Returns
    -------
    Document : A `couchdb3.document.Document` object containing the design document&#39;s content.
    &#34;&#34;&#34;
    return self.get(docid=f&#34;_design/{ddoc}&#34;, **kwargs)</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.indexes"><code class="name flex">
<span>def <span class="ident">indexes</span></span>(<span>self) ‑> Dict</span>
</code></dt>
<dd>
<div class="desc"><p>Get a list of all indexes in the database.</p>
<h2 id="returns">Returns</h2>
<p>Dict : A dictionary with the following keys.</p>
<ul>
<li>total_rows (<code>int</code>) – Number of indexes</li>
<li>indexes (<code>List[Dict]</code>) – Array of index definitions</li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def indexes(
        self,
) -&gt; Dict:
    &#34;&#34;&#34;
    Get a list of all indexes in the database.

    Returns
    -------
    Dict : A dictionary with the following keys.

      - total_rows (`int`) – Number of indexes
      - indexes (`List[Dict]`) – Array of index definitions
    &#34;&#34;&#34;
    return self._get(resource=&#34;_index&#34;).json()</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.purge"><code class="name flex">
<span>def <span class="ident">purge</span></span>(<span>self, data: Dict) ‑> Dict</span>
</code></dt>
<dd>
<div class="desc"><p>Purge permanently the given pairs of <code>(id,rev)</code>. When deleting a (revisions of a) document, the document is
marked as <code>_deleted=true</code> as opposed to being completely purged. For more info, please refer to
<a href="https://docs.couchdb.org/en/main/api/database/misc.html#db-purge">the official documentation</a>.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>data</code></strong> :&ensp;<code>Dict</code></dt>
<dd>A dictionary with document IDs as keys and list of revisions as values.</dd>
</dl>
<h2 id="returns">Returns</h2></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def purge(
        self,
        data: Dict
) -&gt; Dict:
    &#34;&#34;&#34;
    Purge permanently the given pairs of `(id,rev)`. When deleting a (revisions of a) document, the document is
    marked as `_deleted=true` as opposed to being completely purged. For more info, please refer to
    [the official documentation](https://docs.couchdb.org/en/main/api/database/misc.html#db-purge).

    Parameters
    ----------
    data : Dict
        A dictionary with document IDs as keys and list of revisions as values.

    Returns
    -------

    &#34;&#34;&#34;
    return self._post(
        resource=&#34;_purge&#34;,
        body=data
    ).json()</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.put_attachment"><code class="name flex">
<span>def <span class="ident">put_attachment</span></span>(<span>self, docid: str, attname: str, path: str = None, *, content: Any = None, rev: str = None) ‑> Tuple[str, bool, str]</span>
</code></dt>
<dd>
<div class="desc"><p>Uploads the supplied content as an attachment to the specified document.
The appropriate content-type is generated using <code><a title="couchdb3.utils.content_type_getter" href="utils.html#couchdb3.utils.content_type_getter">content_type_getter()</a></code>.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>docid</code></strong> :&ensp;<code>str</code></dt>
<dd>The document's id.</dd>
<dt><strong><code>attname</code></strong> :&ensp;<code>str</code></dt>
<dd>The attachment's name.</dd>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path ot the local file to be uploaded.
Precisely one of the arguments <code>path</code> or <code>content</code> must be supplied.</dd>
<dt><strong><code>content</code></strong> :&ensp;<code>str</code></dt>
<dd>The content to be uploaded.
Precisely one of the arguments <code>path</code> or <code>content</code> must be supplied.</dd>
<dt><strong><code>rev</code></strong> :&ensp;<code>str</code></dt>
<dd>The document's current revision. Must be supplied for existing documents.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>Tuple[str, bool, str] : A tuple consisting of the following elements.</p>
<ul>
<li>the document's id ( <code>str</code>)</li>
<li>the operation status (<code>bool</code>)</li>
<li>the revision ( <code>str</code>)</li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_attachment(
        self,
        docid: str,
        attname: str,
        path: str = None,
        *,
        content: Any = None,
        rev: str = None,
) -&gt; Tuple[str, bool, str]:
    &#34;&#34;&#34;
    Uploads the supplied content as an attachment to the specified document.
    The appropriate content-type is generated using `couchdb3.utils.content_type_getter`.

    Parameters
    ----------
    docid : str
        The document&#39;s id.
    attname : str
        The attachment&#39;s name.
    path : str
        The path ot the local file to be uploaded.
        Precisely one of the arguments `path` or `content` must be supplied.
    content : str
        The content to be uploaded.
        Precisely one of the arguments `path` or `content` must be supplied.
    rev : str
        The document&#39;s current revision. Must be supplied for existing documents.

    Returns
    -------
    Tuple[str, bool, str] : A tuple consisting of the following elements.

      - the document&#39;s id ( `str`)
      - the operation status (`bool`)
      - the revision ( `str`)
    &#34;&#34;&#34;
    if (not content and not path) or (content and path):
        raise ValueError(&#34;Precisely one of the arguments \&#34;attdata\&#34; and  \&#34;attloc\&#34; must be provided.&#34;)
    content_type = content_type_getter(data=content, file_name=path)
    resource = f&#34;{docid}/{attname}&#34;
    query_kwargs = {&#34;rev&#34;: rev}
    req_kwargs = {
        &#34;headers&#34;: {
            &#34;content-type&#34;: content_type_getter(data=content, file_name=path)
        }
    }
    if path:
        with open(path, &#34;rb&#34;) as file:
            response = self._put(
                resource=resource,
                query_kwargs=query_kwargs,
                data=file,
                headers={
                    &#34;content-type&#34;: content_type
                }
            )
    else:
        req_kwargs.update({&#34;body&#34;: content})
        response = self._put(
            resource=resource,
            query_kwargs=query_kwargs,
            body=content,
            headers={
                &#34;content-type&#34;: content_type
            }
        )
    data = response.json()
    return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.put_design"><code class="name flex">
<span>def <span class="ident">put_design</span></span>(<span>self, ddoc: str, *, rev: str = None, language: str = None, options: Dict = None, filters: Dict = None, updates: Dict = None, validate_doc_update: str = None, views: Dict = None, autoupdate: bool = None, **kwargs) ‑> Tuple[str, bool, str]</span>
</code></dt>
<dd>
<div class="desc"><p>Create or update a named design document. For more info, please refer to
<a href="https://docs.couchdb.org/en/latest/api/ddoc/common.html#put--db-_design-ddoc">the official documentation</a>.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>ddoc</code></strong> :&ensp;<code>str</code></dt>
<dd>The design document's name.</dd>
<dt><strong><code>rev</code></strong> :&ensp;<code>str</code></dt>
<dd>The design document's revision in case of an update.</dd>
<dt><strong><code>language</code></strong> :&ensp;<code>str</code></dt>
<dd>Defines <a href="https://docs.couchdb.org/en/latest/query-server/index.html#query-server">Query Server</a> to process
design document functions.</dd>
<dt><strong><code>options</code></strong> :&ensp;<code>Dict</code></dt>
<dd>View’s default options.</dd>
<dt><strong><code>filters</code></strong> :&ensp;<code>Dict</code></dt>
<dd><a href="https://docs.couchdb.org/en/latest/ddocs/ddocs.html#filterfun">Filter functions</a> definition.</dd>
<dt><strong><code>updates</code></strong> :&ensp;<code>Dict</code></dt>
<dd><a href="https://docs.couchdb.org/en/latest/ddocs/ddocs.html#updatefun">Update functions</a> definition.</dd>
<dt><strong><code>validate_doc_update</code></strong> :&ensp;<code>str</code></dt>
<dd><a href="https://docs.couchdb.org/en/latest/ddocs/ddocs.html#vdufun">Validate document update</a> function source.</dd>
<dt><strong><code>views</code></strong> :&ensp;<code>Dict</code></dt>
<dd><a href="https://docs.couchdb.org/en/latest/ddocs/ddocs.html#viewfun">View functions</a> definition.</dd>
<dt><strong><code>autoupdate</code></strong> :&ensp;<code>bool</code></dt>
<dd>Indicates whether to automatically build indexes defined in this design document.</dd>
<dt><strong><code>kwargs</code></strong></dt>
<dd>&nbsp;</dd>
</dl>
<p>Further <code><a title="couchdb3.database.Database.save" href="#couchdb3.database.Database.save">Database.save()</a></code> parameters.</p>
<h2 id="returns">Returns</h2>
<p>Tuple[str, bool, str] : The document's id ( <code>str</code>), the operation status (<code>bool</code>) and the revision ( <code>str</code>).</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_design(
        self,
        ddoc: str,
        *,
        rev: str = None,
        language: str = None,
        options: Dict = None,
        filters: Dict = None,
        updates: Dict = None,
        validate_doc_update: str = None,
        views: Dict = None,
        autoupdate: bool = None,
        **kwargs
) -&gt; Tuple[str, bool, str]:
    &#34;&#34;&#34;
    Create or update a named design document. For more info, please refer to
    [the official documentation](https://docs.couchdb.org/en/latest/api/ddoc/common.html#put--db-_design-ddoc).

    Parameters
    ----------
    ddoc : str
        The design document&#39;s name.
    rev : str
        The design document&#39;s revision in case of an update.
    language : str
        Defines [Query Server](https://docs.couchdb.org/en/latest/query-server/index.html#query-server) to process
        design document functions.
    options : Dict
        View’s default options.
    filters : Dict
        [Filter functions](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#filterfun) definition.
    updates : Dict
        [Update functions](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#updatefun) definition.
    validate_doc_update : str
        [Validate document update](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#vdufun) function source.
    views : Dict
        [View functions](https://docs.couchdb.org/en/latest/ddocs/ddocs.html#viewfun) definition.
    autoupdate : bool
        Indicates whether to automatically build indexes defined in this design document.
    kwargs
    Further `Database.save` parameters.

    Returns
    -------
    Tuple[str, bool, str] : The document&#39;s id ( `str`), the operation status (`bool`) and the revision ( `str`).
    &#34;&#34;&#34;
    return self.save(
        doc={
            &#34;_id&#34;: f&#34;_design/{ddoc}&#34;,
            &#34;_rev&#34;: rev,
            &#34;language&#34;: language,
            &#34;options&#34;: options,
            &#34;filters&#34;: filters,
            &#34;updates&#34;: updates,
            &#34;validate_doc_update&#34;: validate_doc_update,
            &#34;views&#34;: views,
            &#34;autoupdate&#34;: autoupdate
        },
        **kwargs
    )</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.save"><code class="name flex">
<span>def <span class="ident">save</span></span>(<span>self, doc: Union[Dict, <a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a>], batch: bool = None, new_edits: bool = None, path: str = None) ‑> Tuple[str, bool, str]</span>
</code></dt>
<dd>
<div class="desc"><p>Create a new named document, or a new revision of the existing document.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>doc</code></strong> :&ensp;<code>Union[Dict, <a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a>]</code></dt>
<dd>A dictionary or a <code><a title="couchdb3.document.Document" href="document.html#couchdb3.document.Document">Document</a></code> instance containing a valid identifier (<code>doc["_id"]</code>)
as well as revision number (<code>doc["_rev"]</code>) if need be.</dd>
<dt><strong><code>batch</code></strong> :&ensp;<code>bool</code></dt>
<dd>Store document in batch mode. Default <code>None</code>.</dd>
<dt><strong><code>new_edits</code></strong> :&ensp;<code>bool</code></dt>
<dd>Prevents insertion of a conflicting document. If false, a well-formed _rev must be included in the document.
<code>new_edits=False</code> is used by the replicator to insert documents into the target database even if that leads
to the creation of conflicts.</dd>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>Database path, e.g <code>_design</code>. Default <code>None</code>.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>Tuple[str, bool, str] : The document's id ( <code>str</code>), the operation status (<code>bool</code>) and the revision ( <code>str</code>).</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def save(
        self,
        doc: Union[Dict, Document],
        batch: bool = None,
        new_edits: bool = None,
        path: str = None
) -&gt; Tuple[str, bool, str]:
    &#34;&#34;&#34;
    Create a new named document, or a new revision of the existing document.

    Parameters
    ----------
    doc : Union[Dict, couchdb3.document.Document]
        A dictionary or a `couchdb3.document.Document` instance containing a valid identifier (`doc[&#34;_id&#34;]`)
        as well as revision number (`doc[&#34;_rev&#34;]`) if need be.
    batch : bool
        Store document in batch mode. Default `None`.
    new_edits : bool
        Prevents insertion of a conflicting document. If false, a well-formed _rev must be included in the document.
        `new_edits=False` is used by the replicator to insert documents into the target database even if that leads
        to the creation of conflicts.
    path : str
        Database path, e.g `_design`. Default `None`.

    Returns
    -------
    Tuple[str, bool, str] : The document&#39;s id ( `str`), the operation status (`bool`) and the revision ( `str`).
    &#34;&#34;&#34;
    &#34;&#34;&#34;
    :return: 
    &#34;&#34;&#34;
    batch = &#34;ok&#34; if batch else None
    data = self._put(
        resource=&#34;%s/%s&#34; % (path, doc.get(&#34;_id&#34;)) if path else doc.get(&#34;_id&#34;),
        body=doc,
        query_kwargs={
            &#34;batch&#34;: &#34;ok&#34; if batch else None,
            &#34;new_edits&#34;: new_edits,
            &#34;rev&#34;: doc.get(&#34;_rev&#34;)
        }
    ).json()
    return data[&#34;id&#34;], data[&#34;ok&#34;], data[&#34;rev&#34;]</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.save_index"><code class="name flex">
<span>def <span class="ident">save_index</span></span>(<span>self, index: Dict, ddoc: str = None, name: str = None, index_type: str = 'json', partitioned: bool = None) ‑> Tuple[str, str, str]</span>
</code></dt>
<dd>
<div class="desc"><p>Create a new index on a database.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>index</code></strong> :&ensp;<code>Dict</code></dt>
<dd>Dictionary describing the index to create.</dd>
<dt><strong><code>ddoc</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the design document in which the index will be created. By default, each index will be created in
its own design document. Indexes can be grouped into design documents for efficiency. However, a change to
one index in a design document will invalidate all other indexes in the same document (similar to views).</dd>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>Name of the index. If no name is provided, a name will be generated automatically.</dd>
<dt><strong><code>index_type</code></strong> :&ensp;<code>str</code></dt>
<dd>Can be <code>json</code>
or <code>text</code>. Defaults to <code>json</code>. Geospatial indexes will be supported in the future. Optional
Text indexes are supported via a third party library</dd>
<dt><strong><code>partitioned</code></strong> :&ensp;<code>bool</code></dt>
<dd>Determines whether a JSON index is partitioned or global. The default value of <code>partitioned</code> is the
<code>partitioned</code> property of the database. To create a global index on a partitioned database, specify <code>False</code>
for the <code>"partitioned"</code> field. If you specify <code>True</code> for the <code>"partitioned"</code> field on an unpartitioned
database, an error occurs.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>Tuple[str, str, str]: A tuple consisting of the following elements.</p>
<ul>
<li>result (<code>str</code>) – Flag to show whether the index was created or one already exists. Can be <code>"created"</code> or
<code>"exists"</code>.</li>
<li>id (<code>str</code>) – Id of the design document the index was created in.</li>
<li>name (<code>str</code>) – Name of the index created.</li>
</ul></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def save_index(
        self,
        index: Dict,
        ddoc: str = None,
        name: str = None,
        index_type: str = &#34;json&#34;,
        partitioned: bool = None
) -&gt; Tuple[str, str, str]:
    &#34;&#34;&#34;
    Create a new index on a database.

    Parameters
    ----------
    index : Dict
        Dictionary describing the index to create.
    ddoc : str
        Name of the design document in which the index will be created. By default, each index will be created in
        its own design document. Indexes can be grouped into design documents for efficiency. However, a change to
        one index in a design document will invalidate all other indexes in the same document (similar to views).
    name : str
        Name of the index. If no name is provided, a name will be generated automatically.
    index_type : str
        Can be `json`  or `text`. Defaults to `json`. Geospatial indexes will be supported in the future. Optional
        Text indexes are supported via a third party library
    partitioned : bool
         Determines whether a JSON index is partitioned or global. The default value of `partitioned` is the
         `partitioned` property of the database. To create a global index on a partitioned database, specify `False`
         for the `&#34;partitioned&#34;` field. If you specify `True` for the `&#34;partitioned&#34;` field on an unpartitioned
         database, an error occurs.

    Returns
    -------
    Tuple[str, str, str]: A tuple consisting of the following elements.

      - result (`str`) – Flag to show whether the index was created or one already exists. Can be `&#34;created&#34;` or
      `&#34;exists&#34;`.
      - id (`str`) – Id of the design document the index was created in.
      - name (`str`) – Name of the index created.
    &#34;&#34;&#34;
    data = self._post(
        resource=&#34;_index&#34;,
        body={
            &#34;index&#34;: index,
            &#34;ddoc&#34;: ddoc,
            &#34;name&#34;: name,
            &#34;type&#34;: index_type,
            &#34;partitioned&#34;: partitioned
        }
    ).json()
    return data[&#34;result&#34;], data[&#34;id&#34;], data[&#34;name&#34;]</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.security"><code class="name flex">
<span>def <span class="ident">security</span></span>(<span>self) ‑> <a title="couchdb3.document.SecurityDocument" href="document.html#couchdb3.document.SecurityDocument">SecurityDocument</a></span>
</code></dt>
<dd>
<div class="desc"><p>Returns the current security object from the specified database.</p>
<h2 id="returns">Returns</h2>
<p>SecurityDocument : A <code><a title="couchdb3.document.SecurityDocument" href="document.html#couchdb3.document.SecurityDocument">SecurityDocument</a></code> object.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def security(
        self
) -&gt; SecurityDocument:
    &#34;&#34;&#34;
    Returns the current security object from the specified database.

    Returns
    -------
    SecurityDocument : A `couchdb3.document.SecurityDocument` object.
    &#34;&#34;&#34;
    data = self._get(
        resource=&#34;_security&#34;
    ).json()
    return SecurityDocument(**data)</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.update_security"><code class="name flex">
<span>def <span class="ident">update_security</span></span>(<span>self, admins: Union[Dict, <a title="couchdb3.document.SecurityDocumentElement" href="document.html#couchdb3.document.SecurityDocumentElement">SecurityDocumentElement</a>], members: Union[Dict, <a title="couchdb3.document.SecurityDocumentElement" href="document.html#couchdb3.document.SecurityDocumentElement">SecurityDocumentElement</a>]) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Update database security.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>admins</code></strong> :&ensp;<code>Union[Dict, SecurityDocumentElement]</code></dt>
<dd>Object with two fields as <code>names</code> and <code>roles</code>. <a href="https://docs.couchdb.org/en/main/api/database/security.html#db-security">See the official
documentation</a> for more info.</dd>
<dt><strong><code>members</code></strong> :&ensp;<code>Union[Dict, SecurityDocumentElement]</code></dt>
<dd>Object with two fields as <code>names</code> and <code>roles</code>. <a href="https://docs.couchdb.org/en/main/api/database/security.html#db-security">See the official
documentation</a> for more info.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p>bool :
Operation status.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_security(
        self,
        admins: Union[Dict, SecurityDocumentElement],
        members: Union[Dict, SecurityDocumentElement],
) -&gt; bool:
    &#34;&#34;&#34;
    Update database security.

    Parameters
    ----------
    admins : Union[Dict, SecurityDocumentElement]
        Object with two fields as `names` and `roles`. [See the official
        documentation](https://docs.couchdb.org/en/main/api/database/security.html#db-security) for more info.
    members : Union[Dict, SecurityDocumentElement]
        Object with two fields as `names` and `roles`. [See the official
        documentation](https://docs.couchdb.org/en/main/api/database/security.html#db-security) for more info.

    Returns
    -------
    bool :  Operation status.
    &#34;&#34;&#34;
    return self._put(
        resource=&#34;_security&#34;,
        body={
            &#34;admins&#34;: admins,
            &#34;members&#34;: members
        }
    ).json()[&#34;ok&#34;]</code></pre>
</details>
</dd>
<dt id="couchdb3.database.Database.view"><code class="name flex">
<span>def <span class="ident">view</span></span>(<span>self, ddoc: str, view: str = None, *, conflicts: bool = None, descending: bool = None, endkey: str = None, endkey_docid: str = None, group: bool = None, group_level: int = None, include_docs: bool = None, attachments: bool = None, att_encoding_info: bool = None, inclusive_end: bool = None, key: str = None, keys: Iterable[str] = None, limit: int = None, reduce: bool = None, skip: int = None, sort: bool = None, stable: bool = None, startkey: str = None, startkey_docid: str = None, update: str = None, update_seq: bool = None) ‑> <a title="couchdb3.view.ViewResult" href="view.html#couchdb3.view.ViewResult">ViewResult</a></span>
</code></dt>
<dd>
<div class="desc"><p>Executes the specified view function from the specified design documen, c.f <a href="https://docs.couchdb.org/en/main/api/ddoc/views.html#db-design-design-doc-view-view-name">the official
documentation</a>.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>ddoc</code></strong> :&ensp;<code>str</code></dt>
<dd>The corresponding design document's id.</dd>
<dt><strong><code>view</code></strong> :&ensp;<code>str</code></dt>
<dd>The view's id.</dd>
<dt><strong><code>conflicts</code></strong> :&ensp;<code>bool</code></dt>
<dd>Include conflicts information in response. Ignored if <code>include_docs</code> isn’t <code>True</code>. Default is <code>None</code>.</dd>
<dt><strong><code>descending</code></strong> :&ensp;<code>bool</code></dt>
<dd>Return the documents in descending order by key. Default is <code>None</code>.</dd>
<dt><strong><code>endkey</code></strong> :&ensp;<code>str</code></dt>
<dd>Stop returning records when the specified key is reached. Default is <code>None</code></dd>
<dt><strong><code>endkey_docid</code></strong> :&ensp;<code>str</code></dt>
<dd>Stop returning records when the specified document ID is reached. Ignored if <code>endkey</code> is not set. Default
is <code>None</code>.</dd>
<dt><strong><code>group</code></strong> :&ensp;<code>bool</code></dt>
<dd>Group the results using the reduce function to a group or single row. Implies <code>reduce</code> is <code>true</code> and the
maximum <code>group_level</code>. Default is <code>None</code>.</dd>
<dt><strong><code>group_level</code></strong> :&ensp;<code>int</code></dt>
<dd>Specify the group level to be used. Implies group is true. Default is <code>None</code>.</dd>
<dt><strong><code>include_docs</code></strong> :&ensp;<code>bool</code></dt>
<dd>Include the associated document with each row. Default is <code>None</code>.</dd>
<dt><strong><code>attachments</code></strong> :&ensp;<code>bool</code></dt>
<dd>Include the Base64-encoded content of attachments in the documents that are included if <code>include_docs</code> is
<code>True</code>. Ignored if <code>include_docs</code> isn’t <code>True</code>. Default is <code>None</code>.</dd>
<dt><strong><code>att_encoding_info</code></strong> :&ensp;<code>bool</code></dt>
<dd>Include encoding information in attachment stubs if <code>include_docs</code> is <code>True</code> and the particular attachment
is compressed. Ignored if <code>include_docs</code> isn’t <code>True</code>. Default is <code>False</code>.</dd>
<dt><strong><code>inclusive_end</code></strong> :&ensp;<code>bool</code></dt>
<dd>Specifies whether the specified end key should be included in the result. Default is <code>None</code>.</dd>
<dt><strong><code>key</code></strong> :&ensp;<code>str</code></dt>
<dd>Return only documents that match the specified key. Default is <code>None</code>.</dd>
<dt><strong><code>keys</code></strong> :&ensp;<code>Iterable[str]</code></dt>
<dd>Return only documents where the key matches one of the keys specified in the argument. Default is <code>None</code>.</dd>
<dt><strong><code>limit</code></strong> :&ensp;<code>int</code></dt>
<dd>Limit the number of the returned documents to the specified number.
Default is <code>None</code>.</dd>
<dt><strong><code>reduce</code></strong> :&ensp;<code>bool</code></dt>
<dd>Use the reduction function. Default is <code>True</code> when a reduce function is defined. Default is <code>None</code>.</dd>
<dt><strong><code>skip</code></strong> :&ensp;<code>int</code></dt>
<dd>Skip this number of records before starting to return the results. Default is <code>None</code>.</dd>
<dt><strong><code>sort</code></strong> :&ensp;<code>bool</code></dt>
<dd>Sort returned rows (see Sorting Returned Rows). Setting this to <code>False</code> offers a performance boost. The
<code>total_rows</code> and <code>offset</code> fields are not available when this is set to <code>False</code>. Default is <code>None</code>.</dd>
<dt><strong><code>stable</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether or not the view results should be returned from a stable set of shards. Default is <code>None</code>.</dd>
<dt><strong><code>startkey</code></strong> :&ensp;<code>str</code></dt>
<dd>Return records starting with the specified key. Default is <code>None</code></dd>
<dt><strong><code>startkey_docid</code></strong> :&ensp;<code>str</code></dt>
<dd>Return records starting with the specified document ID. Ignored if <code>startkey</code> is not set. Default is <code>None</code></dd>
<dt><strong><code>update</code></strong> :&ensp;<code>str</code></dt>
<dd>
<p>Whether or not the view in question should be updated prior to responding to the user. Supported values:</p>
<ul>
<li><code>true</code></li>
<li><code>false</code></li>
<li><code>lazy</code></li>
</ul>
<p>Default is <code>None</code>.</p>
</dd>
<dt><strong><code>update_seq</code></strong> :&ensp;<code>bool</code></dt>
<dd>Whether to include in the response an <code>update_seq</code> value indicating the sequence id of the database the
view reflects. Default is <code>False</code>.</dd>
</dl>
<h2 id="returns">Returns</h2>
<p><code>view.ViewResult</code></p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def view(
        self,
        ddoc: str,
        view: str = None,
        *,
        conflicts: bool = None,
        descending: bool = None,
        endkey: str = None,
        endkey_docid: str = None,
        group: bool = None,
        group_level: int = None,
        include_docs: bool = None,
        attachments: bool = None,
        att_encoding_info: bool = None,
        inclusive_end: bool = None,
        key: str = None,
        keys: Iterable[str] = None,
        limit: int = None,
        reduce: bool = None,
        skip: int = None,
        sort: bool = None,
        stable: bool = None,
        startkey: str = None,
        startkey_docid: str = None,
        update: str = None,
        update_seq: bool = None
) -&gt; ViewResult:
    &#34;&#34;&#34;
    Executes the specified view function from the specified design documen, c.f [the official
    documentation](https://docs.couchdb.org/en/main/api/ddoc/views.html#db-design-design-doc-view-view-name).

    Parameters
    ----------
    ddoc : str
        The corresponding design document&#39;s id.
    view : str
        The view&#39;s id.
    conflicts : bool
        Include conflicts information in response. Ignored if `include_docs` isn’t `True`. Default is `None`.
    descending : bool
        Return the documents in descending order by key. Default is `None`.
    endkey : str
         Stop returning records when the specified key is reached. Default is `None`
    endkey_docid: str
        Stop returning records when the specified document ID is reached. Ignored if `endkey` is not set. Default
        is `None`.
    group: bool
        Group the results using the reduce function to a group or single row. Implies `reduce` is `true` and the
        maximum `group_level`. Default is `None`.
    group_level : int
         Specify the group level to be used. Implies group is true. Default is `None`.
    include_docs : bool
        Include the associated document with each row. Default is `None`.
    attachments : bool
        Include the Base64-encoded content of attachments in the documents that are included if `include_docs` is
        `True`. Ignored if `include_docs` isn’t `True`. Default is `None`.
    att_encoding_info : bool
        Include encoding information in attachment stubs if `include_docs` is `True` and the particular attachment
        is compressed. Ignored if `include_docs` isn’t `True`. Default is `False`.
    inclusive_end : bool
        Specifies whether the specified end key should be included in the result. Default is `None`.
    key : str
        Return only documents that match the specified key. Default is `None`.
    keys: Iterable[str]
        Return only documents where the key matches one of the keys specified in the argument. Default is `None`.
    limit : int
        Limit the number of the returned documents to the specified number.  Default is `None`.
    reduce : bool
        Use the reduction function. Default is `True` when a reduce function is defined. Default is `None`.
    skip : int
        Skip this number of records before starting to return the results. Default is `None`.
    sort : bool
        Sort returned rows (see Sorting Returned Rows). Setting this to `False` offers a performance boost. The
        `total_rows` and `offset` fields are not available when this is set to `False`. Default is `None`.
    stable : bool
        Whether or not the view results should be returned from a stable set of shards. Default is `None`.
    startkey : str
        Return records starting with the specified key. Default is `None`
    startkey_docid : str
        Return records starting with the specified document ID. Ignored if `startkey` is not set. Default is `None`
    update : str
        Whether or not the view in question should be updated prior to responding to the user. Supported values:

        - `true`
        - `false`
        - `lazy`

        Default is `None`.
    update_seq : bool
         Whether to include in the response an `update_seq` value indicating the sequence id of the database the
         view reflects. Default is `False`.

    Returns
    -------
    `view.ViewResult`
    &#34;&#34;&#34;
    return ViewResult(**self._get(
        resource=f&#34;_design/{ddoc}/_view/{view}&#34; if (ddoc and view) else ddoc,
        query_kwargs={
            &#34;conflicts&#34;: conflicts,
            &#34;descending&#34;: descending,
            &#34;endkey&#34;: endkey,
            &#34;endkey_docid&#34;: endkey_docid,
            &#34;group&#34;: group,
            &#34;group_level&#34;: group_level,
            &#34;include_docs&#34;: include_docs,
            &#34;attachments&#34;: attachments,
            &#34;att_encoding_info&#34;: att_encoding_info,
            &#34;inclusive_end&#34;: inclusive_end,
            &#34;key&#34;: key,
            &#34;keys&#34;: keys,
            &#34;limit&#34;: limit,
            &#34;reduce&#34;: reduce,
            &#34;skip&#34;: skip,
            &#34;sorted&#34;: sort,
            &#34;stable&#34;: stable,
            &#34;startkey&#34;: startkey,
            &#34;startkey_docid&#34;: startkey_docid,
            &#34;update&#34;: update,
            &#34;update_seq&#34;: update_seq
        }
    ).json())</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="couchdb3.base.Base" href="base.html#couchdb3.base.Base">Base</a></b></code>:
<ul class="hlist">
<li><code><a title="couchdb3.base.Base.check" href="base.html#couchdb3.base.Base.check">check</a></code></li>
<li><code><a title="couchdb3.base.Base.info" href="base.html#couchdb3.base.Base.info">info</a></code></li>
<li><code><a title="couchdb3.base.Base.rev" href="base.html#couchdb3.base.Base.rev">rev</a></code></li>
<li><code><a title="couchdb3.base.Base.url" href="base.html#couchdb3.base.Base.url">url</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="couchdb3" href="index.html">couchdb3</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="couchdb3.database.Database" href="#couchdb3.database.Database">Database</a></code></h4>
<ul class="two-column">
<li><code><a title="couchdb3.database.Database.all_docs" href="#couchdb3.database.Database.all_docs">all_docs</a></code></li>
<li><code><a title="couchdb3.database.Database.bulk_docs" href="#couchdb3.database.Database.bulk_docs">bulk_docs</a></code></li>
<li><code><a title="couchdb3.database.Database.bulk_get" href="#couchdb3.database.Database.bulk_get">bulk_get</a></code></li>
<li><code><a title="couchdb3.database.Database.compact" href="#couchdb3.database.Database.compact">compact</a></code></li>
<li><code><a title="couchdb3.database.Database.copy" href="#couchdb3.database.Database.copy">copy</a></code></li>
<li><code><a title="couchdb3.database.Database.create" href="#couchdb3.database.Database.create">create</a></code></li>
<li><code><a title="couchdb3.database.Database.delete" href="#couchdb3.database.Database.delete">delete</a></code></li>
<li><code><a title="couchdb3.database.Database.delete_attachment" href="#couchdb3.database.Database.delete_attachment">delete_attachment</a></code></li>
<li><code><a title="couchdb3.database.Database.explain" href="#couchdb3.database.Database.explain">explain</a></code></li>
<li><code><a title="couchdb3.database.Database.find" href="#couchdb3.database.Database.find">find</a></code></li>
<li><code><a title="couchdb3.database.Database.get" href="#couchdb3.database.Database.get">get</a></code></li>
<li><code><a title="couchdb3.database.Database.get_attachment" href="#couchdb3.database.Database.get_attachment">get_attachment</a></code></li>
<li><code><a title="couchdb3.database.Database.get_design" href="#couchdb3.database.Database.get_design">get_design</a></code></li>
<li><code><a title="couchdb3.database.Database.indexes" href="#couchdb3.database.Database.indexes">indexes</a></code></li>
<li><code><a title="couchdb3.database.Database.purge" href="#couchdb3.database.Database.purge">purge</a></code></li>
<li><code><a title="couchdb3.database.Database.put_attachment" href="#couchdb3.database.Database.put_attachment">put_attachment</a></code></li>
<li><code><a title="couchdb3.database.Database.put_design" href="#couchdb3.database.Database.put_design">put_design</a></code></li>
<li><code><a title="couchdb3.database.Database.save" href="#couchdb3.database.Database.save">save</a></code></li>
<li><code><a title="couchdb3.database.Database.save_index" href="#couchdb3.database.Database.save_index">save_index</a></code></li>
<li><code><a title="couchdb3.database.Database.security" href="#couchdb3.database.Database.security">security</a></code></li>
<li><code><a title="couchdb3.database.Database.update_security" href="#couchdb3.database.Database.update_security">update_security</a></code></li>
<li><code><a title="couchdb3.database.Database.view" href="#couchdb3.database.Database.view">view</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>